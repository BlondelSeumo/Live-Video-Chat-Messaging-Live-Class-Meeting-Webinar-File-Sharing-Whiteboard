(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"3HR4":function(e,t,r){"use strict";var o=r("o0o1"),i=r.n(o),n=r("L2JU"),a=r("8BOd");r("i8R7");function s(e,t,r,o,i,n,a){try{var s=e[n](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a={components:{},data:function(){return{formData:{},formErrors:{},initialFormData:null,initianLength:0,emptyFormData:null,entity:null,preRequisite:{},isLoading:!0,useUserPreference:!1,dataType:null,configType:""}},computed:f(f({},Object(n.c)("config",{configsWithPreference:"configs",configs:"configsOriginal",vars:"vars"})),{},{formHasErrors:function(){var e=!1;return this.formErrors.objForEach((function(t){e=""!==t||e})),e}}),methods:f(f(f(f(f({},Object(n.b)("config",["GetConfig"])),Object(n.b)("user",["GetUser"])),Object(n.b)("navigation",["Generate"])),Object(n.b)("common",["Custom"])),{},{findActualValue:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uuid";return t.find((function(t){return t[r]===e}))||null},submit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(formUtil.isUnchanged(this.initialFormData,this.formData))return this.$toasted.info(this.$t("general.nothing_changed"),this.$toastConfig.info),!1;this.isLoading=!0,this.formData.hasOwnProperty("type")&&(this.formData.type=this.formData.type.snakeCase());var r=!0===t||this.useUserPreference?a.e:"module"===this.configType?a.d:a.c;"function"==typeof this.beforeSubmit&&this.beforeSubmit(),r(this.formData).then((function(r){(!0===t||e.useUserPreference?e.GetUser:e.GetConfig)().then((function(){e.$toasted.success(r.message,e.$toastConfig),e.initialFormData=_.cloneDeep(e.formData),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t)})),"function"==typeof e.afterSubmit&&e.afterSubmit(),"function"==typeof e.afterSubmitSuccess&&e.afterSubmitSuccess()})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t),"function"==typeof e.afterSubmit&&e.afterSubmit(),"function"==typeof e.afterSubmitError&&e.afterSubmitError()}))},reset:function(){var e=this;formUtil.confirmAction().then((function(t){t.value&&(e.formData=Object.assign({},e.formData,_.cloneDeep(e.initialFormData)))}))},unsavedCheck:function(e){formUtil.unsavedCheckAlert(this.initialFormData,this.formData,e)},fillPreRequisite:function(e){var t=this;this.preRequisite.objForEach((function(r,o){t.preRequisite[o]=e.hasOwnProperty(o)?e[o]:r})),this.isLoading=!1},fillFormData:function(){var e=this;this.isLoading=!0;var t=this.useUserPreference?this.configsWithPreference:this.configs;this.formData.type&&t[this.formData.type]&&(this.formData=formUtil.assignValues(this.formData,t[this.formData.type])),this.formData.types&&Array.isArray(this.formData.types)&&this.formData.types.forEach((function(r){e.formData=formUtil.assignValues(e.formData,t[r])})),this.formData.override&&this.formData.objForEach((function(r,o){r&&_.isObject(r)?e.formData[o]=formUtil.assignValues(e.formData[o],t[o]):e.formData[o]=t[o]?t[o]:r})),"function"==typeof this.addNewRow&&"function"==typeof this.addNewRowIfNone&&this.addNewRowIfNone(),this.isLoading=!1},getInitialData:function(e){var t,r=this;return(t=i.a.mark((function t(){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.isLoading=!0,t.prev=1,t.next=4,a.b(Object.keys(r.preRequisite).join(","));case 4:return o=t.sent,r.fillPreRequisite(o),e&&r.$nextTick((function(){e()})),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(1),r.isLoading=!1,r.formErrors=formUtil.handleErrors(t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,r=arguments;return new Promise((function(o,i){var n=t.apply(e,r);function a(e){s(n,o,i,a,c,"next",e)}function c(e){s(n,o,i,a,c,"throw",e)}a(void 0)}))})()}}),mounted:function(){this.fillFormData(),this.initialFormData=_.cloneDeep(this.formData)},beforeDestroy:function(){delete this.formData,delete this.formErrors,delete this.preRequisite},beforeRouteLeave:function(e,t,r){this.unsavedCheck(r)}}},"4toW":function(e,t,r){"use strict";r("IWEZ")},IWEZ:function(e,t,r){var o=r("KcZd");"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(o,i);o.locals&&(e.exports=o.locals)},KcZd:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,".server-row+.server-row[data-v-01afd91c]{margin-top:1.5rem}",""])},"Xf/r":function(e,t,r){"use strict";r.r(t);var o=r("3HR4"),i=r("L2JU"),n=r("i8R7");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={props:{index:{type:Number,required:!0},formData:{type:Object,required:!0},formErrors:{type:[String,Object],default:null}},computed:s(s({},Object(i.c)("config",["vars"])),{},{formErrorsComputed:function(){return Object(n.b)(JSON.parse(this.formErrors)||{})}}),watch:{formData:{deep:!0,handler:function(e){this.$emit("updated")}}},methods:{},mounted:function(){}},u=r("KHd+"),l=Object(u.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("fieldset",{staticClass:"fieldset primary server-row"},[r("legend",[e._v(e._s(e.$t("config.ice_server.server")))]),e._v(" "),r("close-button",{style:{top:"25px",right:"5px"},attrs:{title:e.$t("general.remove")},on:{click:function(t){return e.$emit("remove")}}}),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mb-4"},[r("base-input",{attrs:{"auto-focus":"",label:e.$t("config.ice_server.urls"),type:"text",error:e.formErrorsComputed.urls,required:""},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"urls",t)}},model:{value:e.formData.urls,callback:function(t){e.$set(e.formData,"urls",t)},expression:"formData.urls"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-md-6 mb-3"},[r("switch-wrapper",{attrs:{label:e.$t("config.ice_server.requires_credential")}},[r("base-switch",{model:{value:e.formData.requiresCredential,callback:function(t){e.$set(e.formData,"requiresCredential",t)},expression:"formData.requiresCredential"}})],1)],1),e._v(" "),e.formData.requiresCredential?r("div",{staticClass:"col-12 col-md-6 mb-3"},[r("switch-wrapper",{attrs:{label:e.$t("config.ice_server.expirable_credential")}},[r("base-switch",{model:{value:e.formData.expirableCredentials,callback:function(t){e.$set(e.formData,"expirableCredentials",t)},expression:"formData.expirableCredentials"}})],1)],1):e._e(),e._v(" "),e.formData.requiresCredential?[e.formData.expirableCredentials?[r("div",{staticClass:"col-12 mb-4"},[r("base-input",{attrs:{label:e.$t("config.ice_server.secret"),type:"text",error:e.formErrorsComputed.secret},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"secret",t)}},model:{value:e.formData.secret,callback:function(t){e.$set(e.formData,"secret",t)},expression:"formData.secret"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-md-6 mb-4"},[r("base-input",{attrs:{label:e.$t("config.ice_server.expires_in"),type:"number",error:e.formErrorsComputed.expiresIn},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"expiresIn",t)}},model:{value:e.formData.expiresIn,callback:function(t){e.$set(e.formData,"expiresIn",t)},expression:"formData.expiresIn"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-md-6 mb-4"},[r("base-input",{attrs:{label:e.$t("config.ice_server.time_difference"),type:"number",error:e.formErrorsComputed.timeDifference},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"timeDifference",t)}},model:{value:e.formData.timeDifference,callback:function(t){e.$set(e.formData,"timeDifference",t)},expression:"formData.timeDifference"}})],1)]:[r("div",{staticClass:"col-12 col-md-6 mb-4"},[r("base-input",{attrs:{label:e.$t("config.ice_server.username"),type:"text",error:e.formErrorsComputed.username},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"username",t)}},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),e._v(" "),r("div",{staticClass:"col-12 col-md-6 mb-4"},[r("base-input",{attrs:{label:e.$t("config.ice_server.credential"),type:"text",error:e.formErrorsComputed.credential},on:{"update:error":function(t){return e.$set(e.formErrorsComputed,"credential",t)}},model:{value:e.formData.credential,callback:function(t){e.$set(e.formData,"credential",t)},expression:"formData.credential"}})],1)]]:e._e()],2)],1)}),[],!1,null,null,null).exports,m={extends:o.a,components:{ItemRow:l},data:function(){return{formData:{servers:[],type:"ice"},newRowObj:{urls:"",requiresCredential:!1,expirableCredentials:!1,username:"",credential:"",secret:"",expiresIn:43200,timeDifference:0}}},methods:{addNewRow:function(){var e=_.cloneDeep(this.newRowObj);this.formData.servers.push(e)},removeRow:function(e){var t=this;formUtil.confirmAction().then((function(r){r.value&&(t.formData.servers.splice(e,1),t.addNewRowIfNone())}))},addNewRowIfNone:function(){this.initianLength=this.formData.servers.length,this.formData.servers.length<1&&this.addNewRow()},beforeSubmit:function(){this.formData.servers=this.formData.servers.filter((function(e){return""!==e.urls}))},afterSubmit:function(){this.addNewRowIfNone()}},mounted:function(){this.addNewRowIfNone()}},d=(r("4toW"),Object(u.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("base-container",{attrs:{boxed:"","with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("collapse-transition",{attrs:{tag:"div",group:!0,duration:300}},e._l(e.formData.servers,(function(t,o){return r("item-row",{key:o,attrs:{"form-data":t,"form-errors":e.formErrors["servers"+o],index:o},on:{remove:function(t){return e.removeRow(o)}}})})),1),e._v(" "),r("div",{staticClass:"form-footer mt-5"},[r("div",{staticClass:"left-side"},[r("base-button",{attrs:{type:"button",design:"light"},on:{click:e.addNewRow}},[e._v(e._s(e.$t("general.add")))])],1),e._v(" "),r("div",{staticClass:"right-side"},[r("base-button",{attrs:{type:"button",design:"light"},on:{click:e.reset}},[e._v(e._s(e.$t("general.reset")))]),e._v(" "),r("base-button",{attrs:{type:"submit",design:"primary"}},[e._v(e._s(e.$t("general.save")))])],1)])],1)])}),[],!1,null,"01afd91c",null));t.default=d.exports}}]);
//# sourceMappingURL=index.js.map?id=1be2a4fbd1e1eb466400