(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BcCH:function(e,t,o){"use strict";var s=o("XuX8"),a=new(o.n(s).a);t.a=a},CL1i:function(e,t,o){(e.exports=o("I1BE")(!1)).push([e.i,".progress-ring-wrapper{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%;background:hsla(0,0%,100%,.7);display:flex;justify-content:center;align-items:center;padding-bottom:2.5rem;z-index:1}",""])},ICll:function(e,t,o){"use strict";o.d(t,"d",(function(){return a})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r}));var s=o("5TL6");function a(e,t){return Object(s.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t})}function i(e){return Object(s.a)({url:e.url,method:"delete",data:e.data})}function n(e,t,o){return Object(s.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t,cancelToken:o})}function r(e){return Object(s.a)({url:e.url,method:"delete",data:e.data})}},Q7RW:function(e,t,o){"use strict";var s=o("BcCH"),a=o("ICll"),i=o("L2JU");function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var c={name:"image-uploader",props:{existingImage:{type:String,default:""},existingMedia:{type:Object,default:null},placeholder:{type:String,default:"https://via.placeholder.com/200/e1e2e4/b1b2b4/?text=Upload%20Image"},url:{type:String,required:!0},buttonColor:{type:String,default:"primary"},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.image"},darkBg:{type:Boolean,default:!1},profile:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},removeButton:{type:Boolean,default:!0},removeFromServer:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},size:{type:String,default:""},fieldName:{type:String,default:"file"}},data:function(){return{isLoading:!1,imageRemoved:!1,uploadedImage:"",imageToUpload:"",actionLabelUpdated:"",files:[]}},computed:r(r({},Object(i.c)("config",["configs","vars"])),{},{imageSource:function(){var e=this.imageToUpload?this.imageToUpload:this.uploadedImage?this.uploadedImage:this.existingImage?this.existingImage:"";return e||this.placeholder},computedActionLabel:function(){return this.existingImage||this.uploadedImage?"global.change":this.actionLabel},showWhileUploading:function(){return!(!this.imageToUpload||!this.files[0]||"uploading"!==this.files[0].status)}}),methods:{generateImagePreview:function(e){this.isLoading=!0;for(var t=this.$refs.file.files,o=/(\.jpg|\.jpeg|\.png|\.gif)$/i,s=0;s<t.length;s++)o.exec(t[s].name)?this.files.push({uuid:uuid(),file:t[s],status:"waiting",progress:0}):(this.isLoading=!1,this.$toasted.error(this.$t("general.file_not_supported"),this.$toastConfig.error));this.files.length?this.createImage(this.files[0].file):this.isLoading=!1},createImage:function(e){var t=this,o=new FileReader;o.onload=function(e){t.imageToUpload=e.target.result},o.onerror=function(e){console.error("File could not be read! Code "+e.target.error.code)},o.readAsDataURL(e),this.isLoading=!1},cancelUpload:function(){this.files=[],this.imageToUpload=""},uploadImage:function(){var e=this,t=this.files[0];t.status="waiting";var o=new FormData;this.files[0].size>this.configs.system.postMaxSize?this.$toasted.error(this.t("general.file_too_large"),this.$toastConfig.error):(o.append(this.fieldName,this.files[0].file),t.status="uploading",a.d({url:this.url,data:o},(function(e){t.progress=Math.round(100*e.loaded/e.total)})).then((function(o){t.status="uploaded",delete t.cancel,e.$toasted.success(o.message,e.$toastConfig.success),e.imageToUpload="",e.files=[],e.uploadedImage=o.image,e.$emit("uploaded",o.image)})).catch((function(o){t.status="error",e.$emit("error",o),formUtil.handleErrors(o)})))},removeImage:function(){var e=this;this.removeFromServer?formUtil.confirmAction().then((function(t){t.value&&(e.isLoading=!0,a.b({url:e.url}).then((function(t){e.$toasted.success(t.message,e.$toastConfig.success),e.imageRemoved=!0,e.uploadedImage="",e.$emit("removed"),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t)})))})):(this.imageRemoved=!0,this.uploadedImage="",this.$emit("removed"))},startUpload:function(){this.files.length?this.uploadImage():this.$emit("noNeed")}},mounted:function(){s.a.$off("START_UPLOAD",this.startUpload),s.a.$on("START_UPLOAD",this.startUpload),s.a.$off("CANCEL_UPLOAD",this.cancelUpload),s.a.$on("CANCEL_UPLOAD",this.cancelUpload),this.uploadButtonText=this.label},destroyed:function(){s.a.$off("START_UPLOAD",this.startUpload),s.a.$off("CANCEL_UPLOAD",this.cancelUpload)}},d=(o("fPNp"),o("KHd+")),g=Object(d.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:["sm-uploader image-uploader",e.size]},[o("animated-loader",{attrs:{"is-loading":e.isLoading||!e.showProgress&&e.showWhileUploading,"loader-color":e.vars.loaderColor}}),e._v(" "),e.showProgress&&e.showWhileUploading?o("div",{staticClass:"progress-ring-wrapper"},[o("progress-ring",{attrs:{value:e.files[0].progress,"stroke-color":e.vars.loaderColor}})],1):e._e(),e._v(" "),e.imageSource?o("div",{class:["image-display-wrapper",{"dark-bg":e.darkBg}]},[o("div",{class:["image-display",{"image-profile":e.profile}]},[e.imageToUpload?o("img",{staticClass:"img-responsive",attrs:{src:e.imageToUpload}}):o("img",{staticClass:"img-responsive",attrs:{src:e.imageSource}})]),e._v(" "),e.imageToUpload?o("div",{staticClass:"submit-actions"},[o("base-button",{attrs:{type:"button",design:"light",size:"sm"},on:{click:e.cancelUpload}},[o("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.$t("general.cancel")))]),e._v(" "),e.showUploadButton?o("base-button",{attrs:{type:"button",design:"success",size:"sm"},on:{click:e.uploadImage}},[o("i",{staticClass:"fas fa-arrow-circle-right"}),e._v(" "+e._s(e.$t("general.upload")))]):o("base-button",{attrs:{type:"button",design:e.buttonColor,size:"sm"}},[o("i",{staticClass:"far fa-image"}),e._v(" "+e._s(e.$t("global.change",{attribute:e.$t(e.nameLabel)})))])],1):e._e()]):e._e(),e._v(" "),e.imageToUpload?e._e():o("div",{staticClass:"image-uploader-form"},[e.existingImage&&e.removeButton?o("div",{staticClass:"existing-image-actions"},[o("base-button",{attrs:{type:"button",design:"danger",size:"sm"},on:{click:e.removeImage}},[o("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("general.remove")))])],1):e._e(),e._v(" "),o("div",{staticClass:"file-selector"},[o("label",{class:"btn btn-"+e.buttonColor+" btn-sm"},[o("input",{ref:"file",staticClass:"selector-input",attrs:{name:"file",type:"file",id:"file",accept:"image/*"},on:{change:e.generateImagePreview}}),e._v(" "),e._m(0),e._v(" "),o("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.computedActionLabel,{attribute:e.$t(e.nameLabel)})))])])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-upload"})])}],!1,null,null,null);t.a=g.exports},Xnjp:function(e,t,o){"use strict";o.r(t);var s=o("Q7RW"),a=o("L2JU");function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l={components:{ImageUploader:s.a},data:function(){return{logo:"",logoLight:"",icon:"",iconMaskable:"",icon512:"",icon192:"",icon180:"",icon32:"",icon16:"",favicon:"",isLoading:!1}},computed:n({},Object(a.c)("config",["configs","vars"])),methods:n(n({},Object(a.b)("config",["GetConfig"])),{},{handleUploadError:function(e){this.$toasted.error(e,this.$toastConfig.error)},getInitialData:function(){var e=this.configs.assets;e&&(this.logo=e.logo||"",this.logoLight=e.logoLight||"",this.icon=e.icon||"",this.iconMaskable=e.iconMaskable||"",this.icon512=e.icon512||"",this.icon192=e.icon192||"",this.icon180=e.icon180||"",this.icon32=e.icon32||"",this.icon16=e.icon16||"",this.favicon=e.favicon||"")},refreshConfig:function(){var e=this;this.isLoading=!0,this.GetConfig().then((function(t){var o=e.configs.assets;o&&(e.logo=o.logo||"",e.logoLight=o.logoLight||"",e.icon=o.icon||"",e.iconMaskable=o.iconMaskable||"",e.icon512=o.icon512||"",e.icon192=o.icon192||"",e.icon180=o.icon180||"",e.icon32=o.icon32||"",e.icon16=o.icon16||"",e.favicon=o.favicon||""),e.isLoading=!1,e.$toasted.success(t.message,e.$toastConfig.success)})).catch((function(t){e.isLoading=!1,e.formErrors=formUtil.handleErrors(t)}))}}),mounted:function(){this.getInitialData()}},c=o("KHd+"),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("base-container",{attrs:{boxed:"","with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor}},[o("h4",{staticClass:"mb-4 pb-2 border-bottom"},[e._v(e._s(e.$t("config.assets.logo")))]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.logo")))]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=logo","name-label":"config.assets.logo","existing-image":e.logo,placeholder:"/images/placeholder-logo.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-6 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.logo_light")))]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=logo_light","name-label":"config.assets.logo_light","existing-image":e.logoLight,placeholder:"/images/placeholder-logo.png","dark-bg":"","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)])]),e._v(" "),o("h4",{staticClass:"my-4 pb-2 border-bottom"},[e._v(e._s(e.$t("config.assets.icons")))]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon")))]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon","name-label":"config.assets.icon","existing-image":e.icon,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon_maskable")))]),e._v(" "),o("p",{staticClass:"pb-2 mb-0 text-center text-muted"},[e._v("Ref: "),o("a",{attrs:{href:"https://maskable.app/editor",target:"_blank",rel:"nofollow"}},[e._v("Maskable Icon Editor")])]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_maskable","name-label":"config.assets.icon_maskable","existing-image":e.iconMaskable,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon"))+" 512x512")]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_512","name-label":"config.assets.icon_512","existing-image":e.icon512,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon"))+" 192x192")]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_192","name-label":"config.assets.icon_192","existing-image":e.icon192,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon"))+" 180x180")]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_180","name-label":"config.assets.icon_180","existing-image":e.icon180,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon"))+" 32x32")]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_32","name-label":"config.assets.icon_32","existing-image":e.icon32,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.icon"))+" 16x16")]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=icon_16","name-label":"config.assets.icon_16","existing-image":e.icon16,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)]),e._v(" "),o("div",{staticClass:"col-12 col-md-4 mb-4"},[o("h6",{staticClass:"pb-2 mb-0 text-center text-muted font-weight-bold"},[e._v(e._s(e.$t("config.assets.favicon")))]),e._v(" "),o("div",{staticClass:"d-flex justify-content-center mb-4"},[o("image-uploader",{attrs:{url:"/config/assets?type=favicon","name-label":"config.assets.favicon","existing-image":e.favicon,placeholder:"/images/placeholder-icon.png","remove-from-server":""},on:{uploaded:e.refreshConfig,removed:e.refreshConfig}})],1)])])])}),[],!1,null,null,null);t.default=d.exports},fPNp:function(e,t,o){"use strict";o("oq77")},oq77:function(e,t,o){var s=o("CL1i");"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(s,a);s.locals&&(e.exports=s.locals)}}]);
//# sourceMappingURL=index.js.map?id=1b01904056524a53e1b2