(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"/MoV":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"g",(function(){return c})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return d})),i.d(t,"f",(function(){return u})),i.d(t,"h",(function(){return h})),i.d(t,"e",(function(){return m})),i.d(t,"b",(function(){return g}));var n=i("g6NE"),s=n.a.getters["config/configs"],o=n.a.getters["config/vars"],a=function(){return{timezone:s.system.timezone,defaultDateFormat:o.defaultDateFormat,defaultDateTimeFormat:o.defaultDateTimeFormat,serverDateFormat:o.serverDateFormat,serverDateTimeFormat:o.serverDateTimeFormat,calendarLocale:{lastDay:o.defaultDateFormat,sameDay:o.defaultTimeFormat,lastWeek:o.defaultDateFormat,sameElse:o.defaultDateFormat}}},r=function(e,t){var i=a(),n=moment(e,i.serverDateFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),n.format(t||i.defaultDateFormat)):"INVALID DATE STRING"},c=function(e,t){var i=a(),n=moment(e,i.serverTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),n.format(t||i.defaultTimeFormat)):"INVALID TIME STRING"},l=function(e,t){var i=a(),n=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),n.format(t||i.defaultDateTimeFormat)):"INVALID DATE TIME STRING"},d=function(e,t){var i=a(),n=moment(e,i.serverDateTimeFormat);return e?(Array.isArray(e)&&(n=moment(e[0],e[1])),n.calendar(t||i.calendarLocale)):"INVALID DATE TIME STRING"},u=function(e,t,i){var n=a();if(!e)return"INVALID DATE STRING";var s=moment.utc(e,n.serverDateFormat);return"NOW"===e&&(s=moment.utc()),Array.isArray(e)&&(s=moment.utc(e[0],e[1])),s.tz(i||n.timezone).format(t||n.defaultDateFormat)},h=function(e,t,i){var n=a(),s=moment.utc("".concat(moment().format(n.serverDateFormat)," ").concat(e),n.serverTimeFormat);return e?(Array.isArray(e)&&(s=moment.utc(e[0],e[1])),s.tz(i||n.timezone).format(t||n.defaultTimeFormat)):"INVALID TIME STRING"},m=function(e,t,i){var n=a();if(!e)return"INVALID DATE TIME STRING";var s=moment.utc(e,n.serverDateTimeFormat);return"NOW"===e&&(s=moment.utc()),Array.isArray(e)&&(s=moment.utc(e[0],e[1])),s.tz(i||n.timezone).format(t||n.defaultDateTimeFormat)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=a(),s=moment.utc(e,n.serverDateTimeFormat);if(!e)return"INVALID DATE TIME STRING";Array.isArray(e)&&(s=moment.utc(e[0],e[1]));var o=s.tz(i||n.timezone);return o=o.calendar(t||n.calendarLocale)}},0:function(e,t){},"0D4p":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("Vjiq"),s=i("vDqi"),o=i.n(s),a=i("eC5B"),r=i.n(a),c=i("g6NE"),l=function(){var e=c.a.getters["config/configs"],t=e.hasOwnProperty("pusher")?e.pusher:null;!window.Echo&&t&&t.pusherAppKey&&(t.debugMode?r.a.logToConsole=!0:r.a.logToConsole=!1,window.Echo=new n.a({broadcaster:"pusher",cluster:t.pusherAppCluster,encrypted:!0,key:t.pusherAppKey,authorizer:function(e,t){return{authorize:function(t,i){o.a.post("/api/broadcasting/auth",{socket_id:t,channel_name:e.name}).then((function(e){e&&e.data?i(!1,e.data):console.error("Invalid Data!")})).catch((function(e){i(!0,e)}))}}}}),window.EchoOpts={subscriptions:{}})}},"0xtn":function(e,t,i){"use strict";var n=i("L2JU"),s=i("SokU"),o=i.n(s);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{Avatar:o.a},computed:r(r({},Object(n.c)("config",["configs","uiConfigs","vars"])),Object(n.c)("user",{getUserDetails:"get",hasRole:"hasRole",hasPermission:"hasPermission",loggedInUser:"loggedInUser",userUuid:"uuid",profile:"profile",username:"username",locked:"locked"})),methods:r(r({},Object(n.b)("user",["Logout","Lock"])),{},{lock:function(){this.$gaEvent("engagement","lockScreen","Navbar"),this.Lock()},logout:function(){var e=this;this.$gaEvent("engagement","logout","Navbar"),this.Logout().then((function(t){e.$gaEvent("activity","loggedout"),e.$router.push({name:"login",query:{logout:"true"}})}))}})}},"1TzJ":function(e,t,i){"use strict";var n=i("p46w"),s=i.n(n),o=i("7Cbv");!function(){var e=1,t=2;function i(i){var n="";switch(i){case e:n=window.name;break;case t:null!=(n=decodeURIComponent(s.a.get("my-application-browser-tab")))&&"undefined"!=n||(n="")}return n}function n(i,n){switch(i){case e:window.name=n;break;case t:s.a.set("my-application-browser-tab",n||"")}}function a(){var s=i(e)||Object(o.a)();n(e,s);var a=i(t),r=(""==a?null:JSON.parse(a))||null;if(null===r||r.timestamp<(new Date).getTime()-5e3||r.guid===s){var c=function(){var e={guid:s,timestamp:(new Date).getTime()};n(t,JSON.stringify(e))};return c(),setInterval(c,500),!1}return!0}window.isDuplicate=function(){return a()},window.addEventListener("beforeunload",(function(){0==a()&&n(t,"")}))}()},"3ugI":function(e,t,i){var n=i("susR");"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(n,s);n.locals&&(e.exports=n.locals)},"8uEn":function(e,t,i){"use strict";function n(e,t){t||(t={});var i=t.max||100,n=t.boxCount||50,s=t.boxCountRed||5,o=t.boxCountYellow||5,a=t.boxGapFraction||0,r=t.jitter||.02,c=t.width||"auto",l=e.width,d=e.height,u=0,h=e.parentElement,m=e.nextElementSibling||e.previousElementSibling;"auto"!==c&&"parent"!==c||!h.clientWidth?"sibling"===c&&m.clientWidth&&(l=m.clientWidth,e.width=l):(l=h.clientWidth,e.width=l);var g=l/(n+(n+1)*a),f=g*a,p=d-2*f,v=(d-p)/2,b=e.getContext("2d");function C(e,t){return e>n-s?w(e,t)?"rgba(255,47,30,0.9)":"rgba(64,12,8,0.9)":e>n-s-o?w(e,t)?"rgba(255,215,5,0.9)":"rgba(64,53,0,0.9)":w(e,t)?"rgba(53,255,30,0.9)":"rgba(13,64,8,0.9)"}function w(e,t){return e<=Math.ceil(t/i*n)}!function t(){var s=parseInt(e.dataset.val,10);if(u<=s?u+=(s-u)/5:u-=(u-s)/5,r>0&&u>0){var o=Math.random()*r*i;Math.random()>.5&&(o=-o),u+=o}u<0&&(u=0),b.save(),b.beginPath(),b.rect(0,0,l,d),b.fillStyle="rgb(32,32,32)",b.fill(),b.restore(),function(e,t){e.save(),e.translate(v,f);for(var i=0;i<n;i++){var s=(o=i,Math.abs(o)+1);e.beginPath(),e.rect(0,0,g,p),e.fillStyle=C(s,t),e.fill(),e.translate(g+f,0)}var o;e.restore()}(b,u),requestAnimationFrame(t)}()}i.d(t,"a",(function(){return n}))},BcCH:function(e,t,i){"use strict";var n=i("XuX8"),s=new(i.n(n).a);t.a=s},ICll:function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return r}));var n=i("5TL6");function s(e,t){return Object(n.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t})}function o(e){return Object(n.a)({url:e.url,method:"delete",data:e.data})}function a(e,t,i){return Object(n.a)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:t,cancelToken:i})}function r(e){return Object(n.a)({url:e.url,method:"delete",data:e.data})}},OjY7:function(e,t,i){"use strict";var n=i("vDqi"),s=i.n(n),o=i("ICll"),a=i("L2JU"),r=i("7Cbv"),c=i("BcCH"),l=i("nFxi");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var m={name:"file-uploader",components:{},props:{data:{type:Array,default:function(){return[]}},additionalFormData:{type:Object,default:function(){return{}}},requestIdentifier:{type:String,default:Object(r.a)()},url:{type:String,default:"/uploads"},heading:{type:String,default:null},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},buttonWrapperClasses:{type:String,default:"justify-content-start"},headingClasses:{type:String,default:"mb-0"},buttonClasses:{type:String,default:""},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,required:!0},autoUpload:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},hideButtonLabel:{type:Boolean,default:!1},hideFileList:{type:Boolean,default:!1},hideResetButton:{type:Boolean,default:!1},hideAfterUpload:{type:Boolean,default:!1},showSelectedFilesCount:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,fileRemoved:!1,actionLabelUpdated:"",files:[],uploadedFiles:[],existingFiles:[],icons:l.b,mimeTypes:l.c}},computed:u(u({},Object(a.c)("config",["configs","vars"])),{},{computedActionLabel:function(){return this.existingFile?"global.change":this.actionLabel}}),watch:{data:function(e){this.existingFiles=e.map((function(e){return u(u({},e),{},{status:null})}))},"options.uuid":{deep:!0,handler:function(e,t){e&&e!==t&&this.reset()}}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){this.isLoading=!0;var t=null,i=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(t=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&i.length+this.existingFiles.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var n=0;n<i.length;n++)t&&!t.test(i[n].name)?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_not_supported",{attribute:i[n].name.split(".").pop()}),this.$toastConfig.error)):i[n].size>this.configs.system.postMaxSize?(this.isLoading=!1,this.$toasted.error(this.$t("global.file_too_large",{attribute:i[n].name}),this.$toastConfig.error)):this.files.push({uuid:Object(r.a)(),file:i[n],status:"waiting",progress:0});this.isLoading=!1,this.$emit("selected",this.files.length),this.autoUpload&&this.startUploading()}},startUploading:function(){var e=this;if(this.files.filter((function(e){return"waiting"===e.status})).length){var t=[],i=s.a.CancelToken;this.$emit("uploading",this.files.length);for(var n=function(n){var s=e.files[n];if(t[n]=function(e){s.progress=Math.round(100*e.loaded/e.total)},"waiting"===s.status){var a=new FormData;a.append("file",s.file),a.append("mime",s.file.type),a.append("token",e.options.token),a.append("module",e.options.module),a.append("request_uuid",e.requestIdentifier),a.append("first_attachment",0===n),a.append("last_attachment",n===e.files.length-1),e.additionalFormData.objForEach((function(e,t){e&&(_.isObject(e)?a.append(t.snakeCase(),JSON.stringify(e)):a.append(t.snakeCase(),e))})),s.status="uploading";var r=new i((function(e){s.cancel=e}));o.c({url:e.url,data:a},t[n],r).then((function(t){t.upload?e.uploadedFiles.push(t.upload):t.attachments&&e.uploadedFiles.push(t.attachments),s.uuid=t.upload?t.upload.uuid:t.uuid,s.status="justUploaded",delete s.cancel,setTimeout((function(){s.status="uploaded",e.hideAfterUpload&&e.files.splice(e.files.findIndex((function(e){return e.uuid===s.uuid})),1)}),2e3),e.$emit("updated",t),e.checkUploadStatus(t)})).catch((function(t){if(e.$emit("error",t),t.response&&t.response.data){var i=t.response.data||{},n=i.errors?formUtil.assignErrors(i.errors):{};s.error=n.message,e.$toasted.error(n.message,e.$toastConfig.error),s.status="error",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===s.uuid})),1)}),3e3),e.$emit("updated",t),e.checkUploadStatus()}else s.status="cancelled",setTimeout((function(){e.files.splice(e.files.findIndex((function(e){return e.uuid===s.uuid})),1)}),3e3)}))}},a=0;a<this.files.length;a++)n(a)}},removeFile:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];formUtil.confirmAction().then((function(t){t.value&&(i.isLoading=!0,o.a({url:i.url+"/"+e.uuid,data:{token:i.options.token,module:i.options.module}}).then((function(t){e.status="removed",setTimeout((function(){n?i.existingFiles.splice(i.existingFiles.findIndex((function(t){return t.uuid===e.uuid})),1):i.files.splice(i.files.findIndex((function(t){return t.uuid===e.uuid})),1)}),3e3),i.isLoading=!1,i.$toasted.success(t.message,i.$toastConfig.success),i.$emit("selected",i.files.length),i.$emit("updated",t),i.checkUploadStatus()})).catch((function(t){var n=t.response.data||{},s=n.errors?formUtil.assignErrors(n.errors):{};i.$toasted.error(s.message,i.$toastConfig.error),e.error=s.message,e.status="removeError"})))}))},checkUploadStatus:function(e){for(var t=!0,i=0;i<this.files.length;i++)"justUploaded"!==this.files[i].status&&"uploaded"!==this.files[i].status&&(t=!1);t?this.$emit("uploaded",this.uploadedFiles):this.$emit("error")},reset:function(){this.isLoading=!1,this.fileRemoved=!1,this.actionLabelUpdated="",this.files=[],this.uploadedFiles=[];var e=this.$refs.filesInput;e.type="text",e.type="file",this.$emit("selected",this.files.length)},startUpload:function(){this.files.length?this.startUploading():this.$emit("noNeed")}},mounted:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$on("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset),c.a.$on("RESET_UPLOAD",this.reset),this.existingFiles=this.data.map((function(e){return u(u({},e),{},{status:null})}))},filters:{decimal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(e).toFixed(t)}},destroyed:function(){c.a.$off("START_UPLOAD",this.startUpload),c.a.$off("RESET_UPLOAD",this.reset)}},g=i("KHd+"),f=Object(g.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader"},[i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.heading?i("h5",{class:["title-desc",e.headingClasses]},[e._v("\n                "+e._s(e.heading)+"\n            ")]):e._e(),e._v(" "),i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.computedActionLabel,{attribute:e.$t(e.namesLabel)})))]),e._v(" "),e.showSelectedFilesCount&&e.files.length?i("span",{staticClass:"button-label bracketed"},[e._v(e._s(e.files.length))]):e._e()]),e._v(" "),e.hideFileList&&!e.hideResetButton&&e.files.length?i("button",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses],attrs:{type:"button"},on:{click:e.reset}},[e._m(0)]):e._e()])]),e._v(" "),e.existingFiles.length||e.files.length?i("div",{class:["files-list-wrapper",{"d-none":e.hideFileList}]},[i("ul",{staticClass:"files-list"},[e._l(e.existingFiles,(function(t,n){return i("li",{staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.mime)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.filename))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.mime]||t.mime||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":!t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):t.status&&"removeError"!==t.status?e._e():i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,n,!0)}}},[i("i",{staticClass:"fas fa-trash"})])])])],1)])})),e._v(" "),e._l(e.files,(function(t,n){return i("li",{staticClass:"file-details-row"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.file.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.file.name))]),e._v(" "),t.error?i("p",{staticClass:"text-danger"},[e._v("\n                        "+e._s(t.error)+"\n                    ")]):i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.file.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(e._f("decimal")(t.file.size/1024,0))+" KB")])])]),e._v(" "),i("div",{class:["status-wrapper",{"actions-wrapper":"uploaded"===t.status||"removeError"===t.status}]},[i("transition",{staticClass:"transition-wrapper",attrs:{appear:"",tag:"div",name:"actions",mode:"out-in"}},["uploading"===t.status?i("div",{staticClass:"status-uploading-wrapper"},[i("label",{staticClass:"status-action",on:{click:t.cancel}},[e._v(e._s(e.$t("general.cancel")))]),e._v(" "),i("progress-ring",{attrs:{value:t.progress,"stroke-color":e.vars.loaderColor}})],1):"justUploaded"===t.status?i("div",{staticClass:"status-uploaded-wrapper"},[i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]),e._v(" "),i("span",{staticClass:"status-icon text-success"},[i("i",{staticClass:"fas fa-check"})])]):"cancelled"===t.status?i("div",{staticClass:"status-cancelled-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Cancelled!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-times"})])]):"removed"===t.status?i("div",{staticClass:"status-removed-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Removed!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-trash"})])]):"error"===t.status?i("div",{staticClass:"status-error-wrapper"},[i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]),e._v(" "),i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})])]):"uploaded"===t.status||"removeError"===t.status?i("div",{staticClass:"actions-buttons"},["removeError"===t.status?i("label",{staticClass:"status-text text-danger"},[e._v("Error!")]):e._e(),e._v(" "),"removeError"===t.status?i("span",{staticClass:"status-icon text-danger"},[i("i",{staticClass:"fas fa-exclamation-triangle"})]):"uploaded"===t.status?i("label",{staticClass:"status-text text-success"},[e._v("Uploaded!")]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"remove-btn",attrs:{type:"button",title:e.$t("global.remove",{attribute:e.$t(e.nameLabel)})},on:{click:function(i){return e.removeFile(t,n)}}},[i("i",{staticClass:"fas fa-trash"})])]):e._e()])],1)])}))],2)]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);t.a=f.exports},adPT:function(e,t,i){"use strict";var n={name:"animated-number",props:{number:{type:Number,default:0},delay:{type:Number,default:20}},data:function(){return{displayNumber:0,interval:!1,initialInterval:!1}},methods:{changeNumberFn:function(){if(this.displayNumber!=this.number){var e=(this.number-this.displayNumber)/10;e=e>=0?Math.ceil(e):Math.floor(e),this.displayNumber=this.displayNumber+e}}},watch:{number:function(){clearInterval(this.interval),this.number!=this.displayNumber&&(this.interval=window.setInterval(this.changeNumberFn,this.delay))}},mounted:function(){this.displayNumber=0,clearInterval(this.initialInterval),this.number!=this.displayNumber&&(this.initialInterval=window.setInterval(this.changeNumberFn,this.delay))}},s=i("KHd+"),o=Object(s.a)(n,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.displayNumber))])}),[],!1,null,null,null);t.a=o.exports},bdEB:function(e,t,i){"use strict";var n=i("L2JU");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={props:{tag:{type:String,default:"a"},place:{type:String,default:"normal"},size:{type:String,default:"normal"},appLogo:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},link:{type:String,default:""},assets:{type:Object}},data:function(){return{appLogoText:window.kmenv.name}},computed:o(o({},Object(n.c)("config",["configs","uiConfigs"])),{},{computedUrl:function(){return"a"===this.tag&&(""!==this.link?this.link:"/")},orgLogo:function(){if(this.appLogo||!this.configs.assets&&!this.assets)return"navbar"===this.place||"sidebar"===this.place||"dark"===this.place?"/images/logo-light.png":"/images/logo.png";var e=this.assets&&this.assets.logo?this.assets.logo:this.configs.assets.logo?this.configs.assets.logo:"/images/logo.png";return(this.assets&&this.assets.logoLight||this.configs.assets.logoLight)&&("navbar"===this.place&&this.uiConfigs.topNavbarLogoLight||"sidebar"===this.place&&this.uiConfigs.leftSidebarLogoLight||"dark"===this.place)&&(e=this.assets&&this.assets.logoLight?this.assets.logoLight:this.configs.assets.logoLight),e},appTitle:function(){return this.configs.basic?this.configs.basic.orgName:window.kmenv.name}})},c=i("KHd+"),l=Object(c.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.tag,{tag:"component",class:["logo",e.place+"-logo",e.size+"-logo",e.orgLogo?"org-logo":"app-logo",e.inline?"inline-logo":""],attrs:{href:e.computedUrl}},[e.orgLogo?i("img",{staticClass:"logo-icon",attrs:{src:e.orgLogo,alt:e.appTitle}}):[i("span",{staticClass:"logo-text",attrs:{title:e.appTitle}},[e._v(e._s(e.appLogoText))])]],2)}),[],!1,null,null,null);t.a=l.exports},"eC/g":function(e,t,i){"use strict";i("3ugI")},susR:function(e,t,i){(t=e.exports=i("I1BE")(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Muli:300,400,600,700,800,900);",""]),t.push([e.i,".files-sharing-box{position:relative;width:100vw;min-height:30vh}.files-sharing-box .files-container{width:100%;height:100%;background-color:#fff}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:.5rem}@media (min-width:576px){.files-sharing-box{position:fixed;top:0;left:0;width:35vw;height:100vh;z-index:1}.files-sharing-box .files-container{width:100%;height:100%;background-color:hsla(0,0%,100%,.85);padding-bottom:60px;opacity:.85}.files-sharing-box .files-container .files-wrapper{display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem}.files-sharing-box:hover .files-container{opacity:1}}",""])},t0ug:function(e,t,i){"use strict";i.r(t);var n=i("0xtn"),s=i("L2JU"),o=i("gFX4"),a=i.n(o),r=i("zWga"),c=i.n(r),l=i("qe5e"),d=(i("vwBX"),i("x18S")),u=i.n(d),h=(i("l4sq"),i("k7+O")),m=i.n(h),g=(i("0D4p"),i("akQX")),f=i("V0LQ"),p=(i("lUM2"),i("PCDP")),v=i("/MoV"),b=i("8uEn"),C=(i("1TzJ"),i("kogc"));function w(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){x(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var L=document.createElement("script");L.setAttribute("src","/js/EBML.js"),document.head.appendChild(L),window.io=a.a,window.hark=u.a;var k={components:{RTCMultiConnection:c.a},data:function(){return{uuid:null,entity:null,isLoading:!1,prevRoute:null,fullScreenItemId:null,meetingRoomId:null,initUrl:"meetings",fallBackRoute:"appMeetingList",newMessages:!1,roomIdAlive:!1,showFlipClock:!0,duplicateTab:!1,fullScreenInOn:!1,permissionRejected:!1,needStreamAddOrReplace:!1,membersLive:[],videoList:[],mediaConfigFormData:{},mediaConfigurations:{selectedAudioInput:null,selectedAudioOutput:null,selectedVideoInput:null,activeAudioInput:null,activeVideoInput:null,activeFacingMode:null,selectedResolution:"Auto",facingMode:"Auto",frameRate:"Auto",bandwidth:{audio:256,video:512,screen:300},recording:{type:"video",mimeType:"video/webm",timeSlice:1e3,disableLogs:!1}},mediaDevices:{audioInput:[],audioOutput:[],videoInput:[],resolutions:[{label:"Auto",constraints:{}},{label:"240p",constraints:{width:{max:426,ideal:426},height:{max:240,ideal:240}}},{label:"360p",constraints:{width:{max:640,ideal:640},height:{max:360,ideal:360}}},{label:"720p",constraints:{width:{max:1280,ideal:1280},height:{max:720,ideal:720}}},{label:"1080p",constraints:{width:{max:1920,ideal:1920},height:{max:1080,ideal:1080}}},{label:"4K",constraints:{width:{max:4096,ideal:4096},height:{max:2160,ideal:2160}}}],facingModes:[{uuid:"Auto",label:"Auto"},{uuid:"user",label:"User"},{uuid:"environment",label:"Environment"}],frameRates:[{uuid:"Auto",label:"Auto"},{uuid:30,label:"30 fps"},{uuid:60,label:"60 fps"}]},socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8=",rtcmConnection:null,localVideo:null,localScreenStreamid:null,localWhiteboardStreamid:null,localGreenRoomStream:null,audioConstraints:{},videoConstraints:{},pageConfigs:{hasAgenda:!0,enableChat:!0,enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,showDeviceConfig:!0,enableScreenSharing:!0,enableRecording:!0,enableHandGesture:!0,enableWhiteboard:!1,footerAutoHide:!1,disableScroll:!1,speechDetection:!0,muteParticipantsOnStart:!1,allowJoiningWithoutDevices:!1,enableFileSharing:!0,enableLinkSharing:!0,layout:"fullpage",lastLayout:"fullpage"},meetingRulesHost:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},meetingRulesGuest:{session:{audio:!1,video:!1,screen:!1,data:!1,oneway:!1},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!1},snoozeOpts:[{uuid:5,name:5,type:"m"},{uuid:10,name:10,type:"m"},{uuid:15,name:15,type:"m"},{uuid:30,name:30,type:"m"},{uuid:60,name:1,type:"h"}],isHandUp:!1,recording:!1,recorded:!1,recordingPaused:!1,recordingDuration:null,showDevicesModal:!1,showFileSharing:!1,showWhiteboard:!1,showAgenda:!0,fileSharingConnection:null,canvasDesigner:null,micVolumeActivity:20}},computed:S(S({},Object(s.c)("config",["configs","uiConfigs","vars"])),{},{user:function(){return{uuid:this.userUuid,username:this.username,name:this.profile.name}},hasVideos:function(){return this.videoList&&this.videoList.length>0?this.videoList.length:0},hasVideosClasses:function(){if(!this.hasVideos)return"has-no-video";var e="has-videos "+(this.pageConfigs.disableScroll?"disable-scroll ":"")+"has-".concat(this.hasVideos,"-videos "),t=this.hasVideos>15?4:this.hasVideos>8?3:this.hasVideos>3?2:1,i=this.hasVideos>20?6:16===this.hasVideos?4:this.hasVideos>12?5:this.hasVideos>9?4:9===this.hasVideos?3:this.hasVideos>6?4:this.hasVideos>4?3:4===this.hasVideos?2:this.hasVideos;return e+(this.hasVideos>20?"has-gt-20-videos":this.hasVideos>12?"has-gt-12-videos":this.hasVideos>4?"has-gt-4-videos":this.hasVideos>1?"has-2-3-videos":"has-1-video")+" has-".concat(t,"-rows has-").concat(i,"-per-row")},liveMembersCount:function(){return this.membersLive.length-1},startDateTimeIsFuture:function(){var e=this.entity&&this.showFlipClock&&this.isStartDateTimeInFuture();return e?this.startCountDown():window.countdownInterval&&clearInterval(window.countdownInterval),e},enableLogs:function(){return this.rtcmConnection&&this.rtcmConnection.enableLogs}}),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:S(S(S({},Object(s.b)("config",["SetUiConfig"])),Object(s.b)("common",["Init","Get","Custom","GetPreRequisite"])),{},{shareURL:function(){var e=this;if(this.entity){this.$gaEvent("engagement","shareURL","Shown");var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");t+=this.entity.identifier?"/m/".concat(this.entity.identifier):"/app/live/meetings/".concat(this.entity.uuid);var i=this.entity.identifier?"".concat($t("meeting.meeting_code"),': <strong class="ml-2"> ').concat(this.entity.identifier,"</strong>"):null;Object(g.c)({title:$t("meeting.user_inviting_msg",{attribute:this.user.name}),alertTitle:i,alertHtml:"".concat($t("misc.share_alert.text"),"<br>")+"<small class='text-muted'>".concat(t,"</small><br>"),url:t},(function(){e.$gaEvent("engagement","shareURL","Copied"),e.$toasted.success($t("meeting.url_has_been_copied"),e.$toastConfig)}))}},isStartDateTimeInFuture:function(){return this.entity&&this.entity.startDateTime&&moment(this.entity.startDateTime,this.vars.serverDateTimeFormat).isAfter(moment())},startCountDown:function(){var e=this;window.countdownInterval&&clearInterval(window.countdownInterval),window.countdownInterval=window.setInterval((function(){e.isStartDateTimeInFuture()?e.showFlipClock=!0:(e.showFlipClock&&!document.hasFocus()&&Object(g.a)(),e.showFlipClock=!1)}),1e3)},stopKeepAlivePolling:function(){window.meetingKeepAliveTimer&&clearInterval(window.meetingKeepAliveTimer)},startKeepAlivePolling:function(){var e=this;window.meetingKeepAliveTimer&&clearInterval(window.meetingKeepAliveTimer),"live"===this.entity.status&&(window.meetingKeepAliveTimer=setInterval((function(){e.Custom({url:"/".concat(e.initUrl,"/").concat(e.uuid,"/keep-alive"),method:"post"}).then((function(e){})).catch((function(e){}))}),6e5))},startRecording:function(){var e=this;this.$gaEvent("engagement","startRecording"),this.recording=!0,this.recorded=!1,this.configs.meeting.debugMode?this.mediaConfigurations.recording.disableLogs=!1:this.mediaConfigurations.recording.disableLogs=!0;var t=this.rtcmConnection.recorder;if(!t){var i=[];this.rtcmConnection.streamEvents.selectAll().forEach((function(e){i.push(e.stream)})),t=l(i,this.mediaConfigurations.recording),this.rtcmConnection.recorder=t,t.startRecording();var n=(new Date).getTime();window.recordingDurationInterval&&(this.recordingDuration=null,clearInterval(window.recordingDurationInterval)),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(f.b)(((new Date).getTime()-n)/1e3)}),1e3),t=null}},pauseRecording:function(){this.$gaEvent("engagement","pauseRecording"),this.recordingPaused=!0;var e=this.rtcmConnection.recorder;if(!e)return alert("No recorder found!");e.pauseRecording(),window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),e=null},resumeRecording:function(){var e=this;this.$gaEvent("engagement","resumeRecording"),this.recordingPaused=!1;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.resumeRecording();var i=(new Date).getTime(),n=Object(f.f)(this.recordingDuration);window.recordingDurationInterval&&clearInterval(window.recordingDurationInterval),window.recordingDurationInterval=window.setInterval((function(){e.recordingDuration=Object(f.b)(n+((new Date).getTime()-i)/1e3)}),1e3),t=null},stopRecording:function(){var e=this;this.$gaEvent("engagement","stopRecording"),this.recording=!1,this.recorded=!0;var t=this.rtcmConnection.recorder;if(!t)return alert("No recorder found!");t.stopRecording((function(){window.recordingDurationInterval&&(e.recordingDuration=null,clearInterval(window.recordingDurationInterval)),l.getSeekableBlob(t.getBlob(),(function(i){var n=URL.createObjectURL(i),s=document.createElement("a");l.invokeSaveAsDialog(i,"meeting_record_"+moment().format(e.vars.serverDateTimeFormat)+".webm"),s.style.display="none",s.href=n,s.download="meeting_record_"+moment().format(e.vars.serverDateTimeFormat)+".webm",document.body.appendChild(s),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(s),e.recorded=!1}),100),t.reset(),t=null}))}))},toggleHandUp:function(){var e=this;this.$gaEvent("engagement","toggleHandUp"),window.lowerHandTimer&&clearTimeout(window.lowerHandTimer);var t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var n=t.srcObject;this.isHandUp=!this.isHandUp,this.videoList[i].isHandUp=this.isHandUp,this.emitSocketEvents("remoteHandToggled",{isHandUp:this.isHandUp,streamid:n.streamid}),this.isHandUp&&(window.lowerHandTimer=setTimeout((function(){e.toggleHandUp()}),3e4)),this.rtcmConnection.extra.isHandUp=this.isHandUp,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleAudio:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$refs.videos.find((function(e){return e.id===t.localVideo.id})),s=this.videoList.findIndex((function(e){return e.id===t.localVideo.id}));if(n&&n.srcObject){var o=n.srcObject,a=o.getAudioTracks();a.forEach((function(e){t.pageConfigs.enableAudio||i?(t.pageConfigs.enableAudio=!1,e.enabled=!1,t.videoList[s].audioMuted=!0):(t.pageConfigs.enableAudio=!0,e.enabled=!0,t.videoList[s].audioMuted=!0)})),this.emitSocketEvents("remoteMutedUnmuted",{audioEnabled:this.pageConfigs.enableAudio,streamid:o.streamid}),this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleVideo:function(){var e=this,t=this.$refs.videos.find((function(t){return t.id===e.localVideo.id})),i=this.videoList.findIndex((function(t){return t.id===e.localVideo.id}));if(t&&t.srcObject){var n=t.srcObject;n.getVideoTracks().forEach((function(t){e.pageConfigs.enableVideo?(e.pageConfigs.enableVideo=!1,t.enabled=!1,e.videoList[i].videoMuted=!0):(e.pageConfigs.enableVideo=!0,t.enabled=!0,e.videoList[i].videoMuted=!1)})),this.emitSocketEvents("remoteMutedUnmuted",{videoEnabled:this.pageConfigs.enableVideo,streamid:n.streamid}),this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.updateExtraData()}else this.localVideo=null},toggleRemoteAudio:function(e,t){e.muted?(this.videoList[t].muted=!1,this.$refs.videos[t].muted=!1):(this.videoList[t].muted=!0,this.$refs.videos[t].muted=!0)},toggleRemoteAudioSource:function(e,t){this.emitSocketEvents("muteUnmuteRemote",e)},toggleEleFullScreen:function(e,t){var i=this,n=this.$refs.videoListEle;this.fullScreenItemId=e.id,this.$fullscreen.toggle(n,{wrap:!1,callback:function(e){i.fullScreenInOn=e}})},toggleFullScreen:function(e){m.a.isEnabled&&(e?m.a.request():m.a.exit())},toggleFooterAutoHide:function(){this.pageConfigs.footerAutoHide=!this.pageConfigs.footerAutoHide,this.$gaEvent("engagement","toggleFooterAutoHide")},toggleLayout:function(e){this.pageConfigs.layout=e||this.pageConfigs.layout,this.pageConfigs.disableScroll="grid"===this.pageConfigs.layout||(this.entity.config&&this.entity.config.hasOwnProperty("disableScroll")?this.entity.config.disableScroll:this.pageConfigs.disableScroll),this.$gaEvent("engagement","toggleLayout",e)},toggleFileSharing:function(){this.showFileSharing=!this.showFileSharing,this.$gaEvent("engagement","toggleFileSharing")},toggleAgenda:function(){this.showAgenda=!this.showAgenda,this.$gaEvent("engagement","toggleAgenda")},toggleWhiteboard:function(){this.$gaEvent("engagement","toggleWhiteboard"),this.showWhiteboard?(this.pageConfigs.layout=this.pageConfigs.lastLayout,this.showWhiteboard=!1):(this.canvasDesigner||this.initWhiteboard(),this.pageConfigs.lastLayout=this.pageConfigs.layout,this.pageConfigs.layout="presentation",this.showWhiteboard=!0)},changeFocus:function(e){e.local||this.videoList.forEach((function(t){t.maximized=t.id===e.id}))},disableMirror:function(e,t){this.videoList[t].disableMirror=!this.videoList[t].disableMirror},kickRemoteUser:function(e,t){var i=this;formUtil.confirmAction().then((function(t){if(t.value){var n=i.$refs.videos.find((function(t){return t.id===e.id}));if(n&&n.srcObject){var s=n.srcObject;i.rtcmConnection.removeStream(s.streamid),i.emitSocketEvents("banAttendee",e),i.Custom({url:"/".concat(i.initUrl,"/").concat(i.uuid,"/invitees/").concat(e.extra.uuid,"/block"),method:"post"}).then((function(e){i.$toasted.success(e.message,i.$toastConfig)})).catch((function(e){formUtil.handleErrors(e)}))}}else t.dismiss,C.c.DismissReason.cancel}))},switchCamera:function(){this.mediaConfigurations.facingMode="user"===this.mediaConfigurations.facingMode?"environment":"user",this.applyMediaConstraints()},stopStream:function(e){var t=this.$refs.videos.find((function(t){return t.id===e.id}));t&&t.srcObject&&t.srcObject.getTracks().forEach((function(e){return e.stop()}))},afterJoiningChannel:function(e){this.membersLive=e},newMemberJoining:function(e){this.membersLive.push(e)},memberLeaving:function(e){this.membersLive=this.membersLive.filter((function(t){return t.uuid!==e.uuid}))},meetingStatusChanged:function(e){if(e.uuid===this.entity.uuid){if(this.entity.status===e.status&&!e.delayed)return;this.entity.status=e.status,this.entity.startDateTime=v.e(e.startDateTime,this.vars.serverDateTimeFormat);var t=e.status;"scheduled"===t&&e.delayed&&(t="delayed");this.$toasted.success($t({live:"meeting.is_live_now",delayed:"meeting.meeting_delayed",cancelled:"meeting.meeting_cancelled",ended:"meeting.meeting_ended"}[t]),this.$toastConfig)}},gotNewMessage:function(){this.pageConfigs.enableChat&&this.configs.chat&&this.configs.chat.enabled&&(this.pageConfigs.showChat&&!this.fullScreenInOn||(this.newMessages=!0,Object(g.a)()))},meetingRoomCreated:function(e){var t=this;this.entity.roomId=e.roomId,this.initMediaAndRtcmConnection(),this.rtcmConnection.checkPresence(this.entity.roomId,(function(e,i){t.roomIdAlive=!!e}))},banAttendee:function(e){this.enableLogs&&console.log(e);var t=this.$refs.videos.find((function(t){return t.id===e.id}));if(t&&t.srcObject){var i=t.srcObject;this.rtcmConnection.removeStream(i.streamid)}e.uuid===this.userUuid&&(this.closeConnectionAndStream(),this.getInitialData()),this.$toasted.info($t("meeting.ban_notification"),this.$toastConfig.info)},streamRemoved:function(e){this.rtcmConnection&&e.id&&this.rtcmConnection.removeStream(e.id),this.rtcmOnStreamEnded(e)},meetingEnded:function(e){this.closeConnectionAndStream(),this.getInitialData()},joinChannel:function(){window.Echo&&(this.entity.isPam?window.meetingChannel=window.Echo.channel("MeetingGuest.".concat(this.uuid)):(window.meetingChannel=window.Echo.join("Meeting.".concat(this.uuid)),window.meetingChannel.here(this.afterJoiningChannel).joining(this.newMemberJoining).leaving(this.memberLeaving)),window.meetingChannel.listen("MeetingStatusChanged",this.meetingStatusChanged).listen("NewMessage",this.gotNewMessage).listen("MeetingRoomCreated",this.meetingRoomCreated).listen("PublicMeetingRoomCreated",this.meetingRoomCreated))},whisperChannel:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&e.whisper&&t&&e.whisper(t,i)},emitSocketEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.rtcmConnection&&this.rtcmConnection.socket&&e&&(this.enableLogs&&console.log("Emitting on Socket: ",e),this.rtcmConnection.socket.emit("Whisper",{event:e,data:t}))},rtcmOnOpen:function(e){this.canvasDesigner&&this.rtcmConnection.isInitiator&&setTimeout((function(){this.canvasDesigner.renderStream()}),1e3)},rtcmOnClose:function(e){},rtcmOnMessage:function(e){},rtcmOnUserStatusChanged:function(e){var t=this,i=this.rtcmConnection.userid;this.enableLogs&&(console.log("On rtcmOnUserStatusChanged - event : ",e),console.log("On rtcmOnUserStatusChanged - localUserId : ",i));var n=this.videoList.filter((function(t){return t.id===e.userid||t.streamUserId===e.userid||e.extra&&t.uuid===e.extra.uuid}));e&&"online"===e.status?n&&n.length?n.forEach((function(i){if(i.username!==e.extra.username){var n=t.videoList.findIndex((function(e){return e.uuid===i.uuid&&(!(e.hasOwnProperty("id")&&i.hasOwnProperty("id"))||e.hasOwnProperty("id")&&i.hasOwnProperty("id")&&e.id===i.id)}));t.videoList[n].username=e.extra.username,t.videoList[n].name=e.extra.name,t.videoList[n].extra&&(t.videoList[n].extra.username=e.extra.username,t.videoList[n].extra.name=e.extra.name)}})):e.extra&&e.extra.hasOwnProperty("username")&&e.extra.username&&function(e){var n=e.userid,s=e.userid===i?"local":"remote";if(t.rtcmConnection.isInitiator||t.entity.canModerate||"local"===s||"live_class"!==t.entity.type.uuid&&"webinar"!==t.entity.type.uuid){var o=t.videoList.find((function(t){return t.id===e.streamid}));if(t.videoList.length>1&&t.recheckLiveParticipants(null),void 0===o){var a=S(S({id:n,streamUserId:e.userid,muted:!0},e.extra),{},{extra:e.extra,maximized:!1,local:"local"===s,screen:!1,status:!0,hasAudio:!1,hasVideo:!1,hasStream:!1,speaking:!1,disableMirror:!1});t.videoList.push(a)}t.isLoading=!1}}(e):n&&n.length&&n.forEach((function(e){t.rtcmConnection.removeStream(e.id),t.recheckLiveParticipants(S(S({},e),{},{streamid:e.id})),t.autoSetVideoMaximized()}))},rtcmOnLeave:function(e){this.enableLogs&&console.log("On rtcmOnLeave - event : ",e)},rtcmOnSpeaking:function(e){var t=this,i=this.videoList.findIndex((function(t){return t.id===e.streamid}));window.onSilenceTimeoutObj["index"+i]&&clearTimeout(window.onSilenceTimeoutObj["index"+i]),this.videoList[i]&&(this.videoList[i].speaking=!0),window.onSilenceTimeoutObj["index"+i]=setTimeout((function(){t.videoList[i]&&(t.videoList[i].speaking=!1)}),5e3)},rtcmOnSilence:function(e){var t=this,i=this.videoList.findIndex((function(t){return t.id===e.streamid}));window.onSilenceTimeoutObj["index"+i]&&clearTimeout(window.onSilenceTimeoutObj["index"+i]),window.onSilenceTimeoutObj["index"+i]=setTimeout((function(){t.videoList[i]&&(t.videoList[i].speaking=!1)}),2e3)},rtcmOnVolumeChange:function(e){},rtcmOnStream:function(e){var t=this;if(this.enableLogs&&console.log("On Stream: ",e),this.rtcmConnection.isInitiator||this.entity.canModerate||"local"===e.type||"live_class"!==this.entity.type.uuid&&"webinar"!==this.entity.type.uuid||e.extra.isInitiator){var i=e.streamid,n=this.videoList.findIndex((function(t){return t.id===e.streamid||t.id===e.userid})),s=e.stream.idInstance?JSON.parse(e.stream.idInstance):e.stream,o=!(s.isAudio||s.audio||s.isVideo||s.video||s.isScreen||s.screen)&&e.extra.hasWhiteboard;if(s.isScreen&&"local"===e.type)this.localScreenStreamid=e.streamid,e.stream.getTracks().forEach((function(e){e.addEventListener("ended",t.stopSharingScreen)}));else o&&"local"===e.type&&(this.localWhiteboardStreamid=e.streamid);this.videoList.length>1&&this.recheckLiveParticipants(null);var a=S(S({id:i,streamUserId:e.userid,muted:"local"===e.type},e.extra),{},{extra:e.extra,maximized:"local"===e.type&&!s.isScreen&&!o,local:"local"===e.type,screen:this.localScreenStreamid===i,whiteboard:o,status:!0,hasAudio:s.isAudio||s.audio,hasVideo:s.isVideo||s.video||s.isScreen||o||s.screen,hasStream:!0,speaking:!1,disableMirror:!1});if((s.isScreen||o)&&(a.videoMuted=!1),-1===n?"local"===e.type&&this.localScreenStreamid!==a.id&&this.localWhiteboardStreamid!==a.id?this.localVideo&&this.needStreamAddOrReplace?a.id=i=this.localVideo.id:(this.localVideo=a,this.videoList.push(a)):this.videoList.push(a):-1===n||this.videoList[n].hasStream||("local"===e.type&&this.localScreenStreamid!==a.id&&this.localWhiteboardStreamid!==a.id?this.localVideo&&this.needStreamAddOrReplace?a.id=i=this.localVideo.id:(this.localVideo=a,this.videoList[n]=Object.assign({},this.videoList[n],a)):this.videoList[n]=Object.assign({},this.videoList[n],a)),this.autoSetVideoMaximized(),this.pageConfigs.enableRecording){var r=this.rtcmConnection.recorder;if(r){var c=r.getInternalRecorder();this.recording&&c&&c.addStreams(e.stream)}}setTimeout((function(){t.enableLogs&&(console.log("$refs : ",t.$refs),console.log("$refs.videos : ",t.$refs.videos));for(var n=0,a=t.$refs.videos.length;n<a;n++)if(t.$refs.videos[n].id===i||t.$refs.videos[n].id===e.userid){t.$refs.videos[n].srcObject=e.stream;break}"local"===e.type&&t.applyOnStartConfigs(),setTimeout((function(){!t.pageConfigs.speechDetection||o||s.isScreen||t.initHark({stream:e.stream,streamedObject:e,connection:t.rtcmConnection})}),1e3)}),500),this.isLoading=!1}},rtcmOnStreamEnded:function(e){this.recheckLiveParticipants(e),this.autoSetVideoMaximized()},rtcmOnMediaError:function(e){var t=this;this.isLoading=!1,window.currentUserMediaRequest&&(window.currentUserMediaRequest.mutex=!1),Object(g.d)(e).alert.then((function(i){"NotFoundError"===e.name||"NotReadableError"===e.name||"OverconstrainedError"===e.name?(t.applyMediaConstraints(!0),t.$toasted.info($t("meeting.media_devices.setup_reset_try_again"),t.$toastConfig.info)):"NotAllowedError"!==e.name&&"PermissionDeniedError"!==e.name||(t.permissionRejected=!0),i.value||(t.isLoading=!1,i.dismiss,C.c.DismissReason.cancel)}))},rtcmOnMute:function(e){this.enableLogs&&console.log("On rtcmOnMute: ",e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.muteType?this.videoList[t].videoMuted=!0:"audio"===e.muteType?this.videoList[t].muted=!0:(this.videoList[t].videoMuted=!0,this.videoList[t].muted=!0,i.srcObject=null)},rtcmOnUnmute:function(e){this.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid})),i=this.$refs.videos.find((function(t){return t.id===e.streamid}));"video"===e.unmuteType?this.videoList[t].videoMuted=!1:"audio"===e.unmuteType?this.videoList[t].muted=!1:(this.videoList[t].videoMuted=!1,this.videoList[t].muted=!1,i.srcObject=e)},rtcmOnRemoteMuteUnmuted:function(e){this.enableLogs&&console.log(e);var t=this.videoList.findIndex((function(t){return t.id===e.streamid}));this.rtcmConnection.streamEvents[e.streamid].stream;e.hasOwnProperty("audioEnabled")?e.audioEnabled?this.videoList[t].audioMuted=!1:this.videoList[t].audioMuted=!0:e.hasOwnProperty("videoEnabled")&&(e.videoEnabled?this.videoList[t].videoMuted=!1:this.videoList[t].videoMuted=!0)},rtcmOnRemoteHandToggled:function(e){if(this.enableLogs&&console.log(e),e&&e.streamid&&this.rtcmConnection.streamEvents[e.streamid]){var t=this.videoList.findIndex((function(t){return t.id===e.streamid}));this.rtcmConnection.streamEvents[e.streamid].stream;e.hasOwnProperty("isHandUp")&&(e.isHandUp?(this.videoList[t].isHandUp=!0,this.$toasted.info($t("meeting.handup_notification",{attribute:this.videoList[t].name}),this.$toastConfig.info)):this.videoList[t].isHandUp=!1)}},rtcmOnMuteUnmuteRemote:function(e){this.enableLogs&&console.log(e);var t=this.$refs.videos.find((function(t){return t.id===e.id}));t&&t.srcObject&&this.toggleAudio()},rtcmOnUserIdAlreadyTaken:function(e,t){this.rtcmConnection.userid=t},initMediaAndRtcmConnection:function(){this.rtcmConnection||(this.rtcmConnection=new c.a,this.rtcmConnection.socketURL=window.atob(this.socketURL),this.configs.signal&&this.configs.signal.url&&(this.rtcmConnection.socketURL=this.configs.signal.url),this.rtcmConnection.autoCreateMediaElement=!1,this.configs.meeting&&(this.configs.meeting.debugMode?this.rtcmConnection.enableLogs=!0:this.rtcmConnection.enableLogs=!1,this.configs.meeting.forceTurn&&(this.rtcmConnection.candidates={turn:!0,stun:!1,host:!1})),this.rtcmConnection.onopen=this.rtcmOnOpen,this.rtcmConnection.onclose=this.rtcmOnClose,this.rtcmConnection.onleave=this.rtcmOnLeave,this.rtcmConnection.onmessage=this.rtcmOnMessage,this.rtcmConnection.onUserStatusChanged=this.rtcmOnUserStatusChanged,this.rtcmConnection.onstream=this.rtcmOnStream,this.rtcmConnection.onstreamended=this.rtcmOnStreamEnded,this.rtcmConnection.onmute=this.rtcmOnMute,this.rtcmConnection.onunmute=this.rtcmOnUnmute,this.rtcmConnection.onMediaError=this.rtcmOnMediaError,this.rtcmConnection.onUserIdAlreadyTaken=this.rtcmOnUserIdAlreadyTaken,this.pageConfigs.speechDetection&&(this.rtcmConnection.onspeaking=this.rtcmOnSpeaking,this.rtcmConnection.onsilence=this.rtcmOnSilence,this.rtcmConnection.onvolumechange=this.rtcmOnVolumeChange,window.onSilenceTimeoutObj={}),this.rtcmConnection.setCustomSocketEvent("Whisper"),this.fileSharingConnection=this.rtcmConnection),this.getMediaConstraints(),this.rtcmConnection.bandwidth=S({},this.mediaConfigurations.bandwidth),this.rtcmConnection.iceServers=[{urls:["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302"]}],this.configs.iceServers.length&&(this.rtcmConnection.iceServers=w(this.configs.iceServers)),this.rtcmConnection.session=S({},this.meetingRulesHost.session),this.rtcmConnection.sdpConstraints.mandatory=S({},this.meetingRulesHost.mandatory),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen}},initSocketListener:function(){if(this.rtcmConnection&&this.rtcmConnection.socket){var e={removedStream:this.streamRemoved,banAttendee:this.banAttendee,muteUnmuteRemote:this.rtcmOnMuteUnmuteRemote,remoteMutedUnmuted:this.rtcmOnRemoteMuteUnmuted,remoteHandToggled:this.rtcmOnRemoteHandToggled,meetingEnded:this.meetingEnded};this.rtcmConnection.socket.on("Whisper",(function(t){t&&e.hasOwnProperty(t.event)&&e[t.event](t.data)}))}},initCanvasDesigner:function(){this.canvasDesigner=new CanvasDesigner,this.canvasDesigner.widgetHtmlURL="/js/canvas-designer/widget.html",this.canvasDesigner.widgetJsURL="/js/canvas-designer/widget.min.js"},initWhiteboard:function(){var e=this;this.videoList.length<1||!this.$refs.whiteboard||!CanvasDesigner||(this.canvasDesigner||this.initCanvasDesigner(),this.canvasDesigner.addSyncListener((function(t){e.rtcmConnection.send(t)})),this.canvasDesigner.setSelected("pencil"),this.canvasDesigner.setTools({pencil:!0,text:!0,image:!0,pdf:!0,eraser:!0,line:!0,arrow:!0,dragSingle:!0,dragMultiple:!0,arc:!0,rectangle:!0,quadratic:!0,bezier:!1,marker:!0,zoom:!1,lineWidth:!0,colorsPicker:!0,extraOptions:!0,code:!1,undo:!0}),this.canvasDesigner.iframe||this.canvasDesigner.appendTo(this.$refs.whiteboard,(function(){e.rtcmConnection.extra.hasWhiteboard=!0,e.rtcmConnection.updateExtraData(),e.canvasDesigner.captureStream((function(t){e.rtcmConnection.addStream(t),e.rtcmConnection.onstream({streamid:t.id,stream:t,userid:e.rtcmConnection.userid,type:"local",extra:e.rtcmConnection.extra})}))})))},destroyWhiteboard:function(){var e=this;if(this.canvasDesigner){this.canvasDesigner.destroy(),this.canvasDesigner=null;var t=this.$refs.videos.find((function(t){return t.id===e.localWhiteboardStreamid}));t&&t.srcObject?(this.rtcmConnection&&this.localWhiteboardStreamid&&(this.rtcmConnection.removeStream(this.localWhiteboardStreamid),this.rtcmOnStreamEnded({id:this.localWhiteboardStreamid}),this.videoList.length>1&&this.recheckLiveParticipants({streamid:this.localWhiteboardStreamid}),this.autoSetVideoMaximized()),this.emitSocketEvents("removedStream",t.srcObject),this.localWhiteboardStreamid=null):this.localWhiteboardStreamid=null}this.rtcmConnection.extra.hasWhiteboard=!1,this.rtcmConnection.updateExtraData()},hideAndDestroyWhiteboard:function(){var e=this;formUtil.confirmAction().then((function(t){t.value?(e.pageConfigs.layout=e.pageConfigs.lastLayout,e.showWhiteboard=!1,e.destroyWhiteboard()):(t.dismiss,C.c.DismissReason.cancel)}))},getMediaConstraints:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.needStreamAddOrReplace=!1,t)return this.audioConstraints={sampleSize:16,channelCount:2,echoCancellation:!1},void(this.videoConstraints={width:{min:426,ideal:1280,max:4096},height:{min:240,ideal:720,max:2160}});this.mediaConfigurations.selectedAudioInput&&this.mediaConfigurations.selectedAudioInput.uuid?(this.audioConstraints={deviceId:{ideal:this.mediaConfigurations.selectedAudioInput.uuid}},this.mediaConfigurations.activeAudioInput!==this.audioConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):this.audioConstraints=!0,this.mediaConfigurations.selectedVideoInput&&this.mediaConfigurations.selectedVideoInput.uuid?(this.videoConstraints={deviceId:{ideal:this.mediaConfigurations.selectedVideoInput.uuid}},this.mediaConfigurations.activeVideoInput!==this.videoConstraints.deviceId.ideal&&(this.needStreamAddOrReplace=!0)):this.videoConstraints={},"Auto"!==this.mediaConfigurations.facingMode?(this.videoConstraints.facingMode=this.mediaConfigurations.facingMode,this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0)):this.videoConstraints.hasOwnProperty("facingMode")&&(this.mediaConfigurations.activeFacingMode!==this.videoConstraints.facingMode&&(this.needStreamAddOrReplace=!0),delete this.videoConstraints.facingMode),"Auto"!==this.mediaConfigurations.frameRate?this.videoConstraints.frameRate=this.mediaConfigurations.frameRate:this.videoConstraints.hasOwnProperty("frameRate")&&delete this.videoConstraints.frameRate;var i=this.mediaDevices.resolutions.find((function(t){return t.label===e.mediaConfigurations.selectedResolution}));i&&"Auto"!==i.label?(this.videoConstraints.width=i.constraints.width,this.videoConstraints.height=i.constraints.height):(this.videoConstraints.hasOwnProperty("width")&&delete this.videoConstraints.width,this.videoConstraints.hasOwnProperty("height")&&delete this.videoConstraints.height)},applyMediaConstraints:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rtcmConnection&&this.localVideo&&(this.getMediaConstraints(e),this.rtcmConnection.mediaConstraints={video:!!this.meetingRulesHost.mediaConstraints.video&&this.videoConstraints,audio:!!this.meetingRulesHost.mediaConstraints.audio&&this.audioConstraints,screen:this.meetingRulesHost.mediaConstraints.screen},this.mediaConfigurations.activeAudioInput=this.audioConstraints.deviceId.ideal,this.mediaConfigurations.activeVideoInput=this.videoConstraints.deviceId.ideal,this.mediaConfigurations.activeFacingMode=this.mediaConfigurations.facingMode,this.needStreamAddOrReplace?this.closeConnectionAndStream(!0):this.rtcmConnection.applyConstraints(this.rtcmConnection.mediaConstraints))},closeConnectionAndStream:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.rtcmConnection){if(this.destroyWhiteboard(),this.rtcmConnection.attachStreams.forEach((function(e){e.stop()})),this.$refs.greenRoomVideo&&this.$refs.greenRoomVideo.srcObject){var i=this.$refs.greenRoomVideo.srcObject;i.stop(),this.localGreenRoomStream=null}else if(this.localGreenRoomStream){var n=this.localGreenRoomStream;n.stop(),this.localGreenRoomStream=null}this.localVideo&&this.emitSocketEvents("removedStream",this.localVideo),this.rtcmConnection.getAllParticipants().forEach((function(t){e.rtcmConnection.disconnectWith(t)})),this.rtcmConnection.leave(),this.rtcmConnection.closeSocket(),window.setTimeout((function(){e.localVideo=null,e.localScreenStreamid=null,e.localWhiteboardStreamid=null,e.localGreenRoomStream=null,e.rtcmConnection.recorder=null,e.rtcmConnection=null,t&&e.getOnline()}),500),this.stopKeepAlivePolling()}this.videoList=[]},initHark:function(e){if(window.hark&&this.pageConfigs.speechDetection){var t=e.streamedObject,i=e.stream,n=e.connection,s=u()(i,{});s.on("speaking",(function(){n.onspeaking(t)})),s.on("stopped_speaking",(function(){n.onsilence(t)})),window.harkInitiated=!0}},recheckLiveParticipants:function(e){var t=this,i=[],n=this.rtcmConnection?this.rtcmConnection.getAllParticipants():[];this.videoList.forEach((function(t,s){var o=n.findIndex((function(e){return e===t.streamUserId}));(!e||e&&t.id!==e.streamid)&&(t.local||!t.local&&-1!==o)||(t.status=!1),i.push(t)})),this.videoList=i,setTimeout((function(){t.videoList=t.videoList.filter((function(e){return e.status})),t.autoSetVideoMaximized()}),3e3)},autoSetVideoMaximized:function(){var e=this,t=function(t){e.videoList[t].maximized=!0,e.videoList=e.videoList.map((function(e,i){return e.maximized=!1,i===t&&(e.maximized=!0),e}))};if(this.videoList.length>1)if(-1===this.videoList.findIndex((function(e){return!e.local&&e.maximized&&e.status}))){var i=this.videoList.findIndex((function(e){return!e.local&&e.hasStream}));t(-1!==i?i:0)}else{var n=this.videoList.findIndex((function(e){return!e.local&&e.whiteboard&&e.status}));-1!==n&&this.videoList[n].whiteboard&&t(n)}else this.videoList.length&&t(0)},validateMediaDeviceRequest:function(e){var t={video:!!e.video,audio:!!e.audio,screen:!!e.screen};return this.pageConfigs.allowJoiningWithoutDevices&&(!t.audio||this.mediaDevices.audioInput&&this.mediaDevices.audioInput.length||(t.audio=!1),!t.video||this.mediaDevices.videoInput&&this.mediaDevices.videoInput.length||(t.video=!1)),t},openRoom:function(e){var t=this;this.rtcmConnection.session=S({},this.meetingRulesHost.session),this.videoList=[],this.getMediaConstraints();var i=this.meetingRulesHost;this.rtcmConnection.mediaConstraints={video:!!i.mediaConstraints.video&&this.videoConstraints,audio:!!i.mediaConstraints.audio&&this.audioConstraints,screen:i.mediaConstraints.screen},this.rtcmConnection.sdpConstraints.mandatory=S({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.enableScalableBroadcast=i.enableScalableBroadcast,this.rtcmConnection.enableScalableBroadcast&&(this.rtcmConnection.maxRelayLimitPerUser=i.maxRelayLimitPerUser),this.rtcmConnection.extra.isInitiator=!0,this.rtcmConnection.open(e,(function(i,n,s){console.log("Room Opened: ",n),t.isLoading=!1,s?formUtil.handleErrors(s):!0===i&&(t.updatePageConfigs(!0),t.whisperChannel(window.meetingChannel,"MeetingRoomCreated",{roomId:e}),t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/alert"),method:"post",params:{type:"MeetingRoomCreated",data:{roomId:e}}}).catch((function(e){t.isLoading=!1,formUtil.handleErrors(e)})),t.initSocketListener(),t.$toasted.success($t("meeting.meeting_created"),t.$toastConfig))}))},joinRoom:function(e){var t=this;this.rtcmConnection.session=S({},this.meetingRulesGuest.session),this.videoList=[],this.getMediaConstraints();var i=this.entity.canModerate?this.meetingRulesHost:this.meetingRulesGuest,n=this.validateMediaDeviceRequest(i.mediaConstraints);this.rtcmConnection.mediaConstraints={video:!!n.video&&this.videoConstraints,audio:!!n.audio&&this.audioConstraints,screen:n.screen},!this.pageConfigs.allowJoiningWithoutDevices||n.audio||n.video||n.screen||(this.rtcmConnection.dontCaptureUserMedia=!0),this.rtcmConnection.sdpConstraints.mandatory=S({},i.mandatory),this.rtcmConnection.autoCloseEntireSession=i.autoCloseEntireSession,this.rtcmConnection.enableScalableBroadcast=i.enableScalableBroadcast,this.rtcmConnection.enableScalableBroadcast&&(this.rtcmConnection.maxRelayLimitPerUser=i.maxRelayLimitPerUser),this.rtcmConnection.extra.isInitiator=this.entity.canModerate,this.rtcmConnection.join(e,(function(e,i,n){console.log("Room Joined: ",i),t.isLoading=!1,!1===e||n?formUtil.handleErrors(n):(t.updatePageConfigs(t.entity.canModerate),t.initSocketListener(),t.$toasted.success($t("meeting.meeting_joined"),t.$toastConfig))}))},applyOnStartConfigs:function(){var e=this;!this.rtcmConnection.extra.isInitiator&&this.pageConfigs.muteParticipantsOnStart&&window.setTimeout((function(){e.toggleAudio(null,!0)}),1e3)},shareScreen:function(){try{this.rtcmConnection.addStream({screen:!0})}catch(e){}},stopSharingScreen:function(){var e=this;this.isLoading=!0;var t=this.$refs.videos.find((function(t){return t.id===e.localScreenStreamid}));t&&t.srcObject?(t.srcObject.getTracks().forEach((function(t){t.removeEventListener("ended",e.stopSharingScreen),t.enabled=!1,t.stop()})),this.rtcmConnection.removeStream(this.localScreenStreamid),this.emitSocketEvents("removedStream",t.srcObject),this.localScreenStreamid=null,this.isLoading=!1):(this.localScreenStreamid=null,this.isLoading=!1)},getOnline:function(){var e=this;this.isLoading=!0,this.showAgenda=!1;this.entity.status;this.$gaEvent("engagement","meeting_getOnline"),this.initMediaAndRtcmConnection(),this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/join"),method:"post"}).then((function(t){e.meetingRoomId=t.meeting.roomId,t.meeting=e.updateMeetingTimezone(t.meeting),e.entity=t.meeting,e.rtcmConnection.extra={username:e.user.username,name:e.user.name,uuid:e.user.uuid,image:e.profile.image,audioMuted:!e.pageConfigs.enableAudio,videoMuted:!e.pageConfigs.enableVideo,isHandUp:e.isHandUp,isInitiator:!1},e.enableLogs&&(console.log("rtcmConnection",e.rtcmConnection),console.log("mediaConfigurations",e.mediaConfigurations),console.log("mediaDevices",e.mediaDevices),console.log("pageConfigs",e.pageConfigs),console.log("videoConstraints",e.videoConstraints),console.log("audioConstraints",e.audioConstraints),console.log("meetingRulesHost",e.meetingRulesHost),console.log("meetingRulesGuest",e.meetingRulesGuest),console.log("rtcmConnection-ExtraData",e.rtcmConnection.extra)),e.rtcmConnection.checkPresence(e.meetingRoomId,(function(t,i){!0===t?e.joinRoom(e.meetingRoomId):e.entity.canModerate?e.openRoom(e.meetingRoomId):(e.isLoading=!1,e.$toasted.error($t("meeting.room_not_found"),e.$toastConfig.error)),e.startKeepAlivePolling()}))})).catch((function(t){e.isLoading=!1,formUtil.handleErrors(t)}))},getOffline:function(){var e=this;this.$gaEvent("engagement","meeting_getOffline"),this.isLoading=!0,this.meetingAction("leave",null,{alert:"confirm",sameCallbackIfError:!0,callback:function(t){e.showAgenda=!0,e.showWhiteboard=!1,"presentation"===e.pageConfigs.layout&&(e.pageConfigs.layout=e.pageConfigs.lastLayout),e.closeConnectionAndStream()}})},meetingAction:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{alert:"confirm"},s={alert:"confirm"};n=Object.assign({},s,n);var o=function(s){t.isLoading=!0,i=s||i,t.Custom({url:"/".concat(t.initUrl,"/").concat(t.uuid,"/").concat(e),method:"post",data:i}).then((function(e){e.meeting=t.updateMeetingTimezone(e.meeting),t.entity=e.meeting,t.$toasted.success(e.message,t.$toastConfig),n.callback&&n.callback(e),t.isLoading=!1})).catch((function(e){n.callback&&n.sameCallbackIfError&&n.callback(e),t.isLoading=!1,formUtil.handleErrors(e)}))};e?"confirm"===n.alert||!0===n.alert?formUtil.confirmAction().then((function(e){e.value?o():(t.isLoading=!1,e.dismiss,C.c.DismissReason.cancel)})):"input"===n.alert?swtAlert.fire({title:n.title,input:"text",inputPlaceholder:n.inputPlaceholder,showCancelButton:!0,confirmButtonText:"Proceed!",cancelButtonText:"Go Back!"}).then((function(e){if(e.value){var i={};i[n.fieldName]=e.value,o(i)}else t.isLoading=!1,e.dismiss,C.c.DismissReason.cancel})):o():this.isLoading=!1},snoozeMeeting:function(e){this.meetingAction("snooze",{period:e})},leaveMeeting:function(){var e=this;this.meetingAction("leave",null,{callback:function(t){e.showAgenda=!0,e.showWhiteboard=!1,"presentation"===e.pageConfigs.layout&&(e.pageConfigs.layout=e.pageConfigs.lastLayout),e.closeConnectionAndStream()}})},cancelMeeting:function(){this.meetingAction("cancel",null,{alert:"input",title:$t("meeting.reason_for_cancellation"),inputPlaceholder:$t("meeting.reason_for_cancellation"),fieldName:"cancellationReason"})},endMeeting:function(){var e=this;this.isLoading=!0,this.meetingAction("end",null,{sameCallbackIfError:!0,callback:function(t){e.showAgenda=!0,e.showWhiteboard=!1,"presentation"===e.pageConfigs.layout&&(e.pageConfigs.layout=e.pageConfigs.lastLayout),e.closeConnectionAndStream(),e.emitSocketEvents("meetingEnded",{status:t.meeting.status})}})},updateMeetingRules:function(){"video_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!1,enableScalableBroadcast:!1}):"audio_conference"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!1,enableScalableBroadcast:!1}):"webinar"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!0},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1}):"live_class"===this.entity.type.uuid?(this.meetingRulesHost={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!1},this.meetingRulesGuest={session:{audio:!0,video:!0,screen:!1,data:!0,oneway:!1},mediaConstraints:{audio:!0,video:!0,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},autoCloseEntireSession:!0,enableScalableBroadcast:!1}):"podcast"===this.entity.type.uuid&&(this.meetingRulesHost={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!0,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1},this.meetingRulesGuest={session:{audio:!0,video:!1,screen:!1,data:!1,oneway:!0},mediaConstraints:{audio:!1,video:!1,screen:!1},mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1},autoCloseEntireSession:!0,enableScalableBroadcast:!0,maxRelayLimitPerUser:1})},updateMeetingTimezone:function(e){var t=this,i=function(e){return v.e(e,t.vars.serverDateTimeFormat)};return e.startDateTime=i(e.startDateTime),e.plannedStartDateTime&&(e.plannedStartDateTime=i(e.plannedStartDateTime)),e},beforeUnload:function(e){this.localVideo&&this.emitSocketEvents("removedStream",this.localVideo)},logEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";this.enableLogs&&("log"===i?console.log(e,t):"error"===i?console.error(e,t):"debug"===i&&console.trace(e,t))},toggleDevicesModal:function(){this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.showDevicesModal=!0},onDevicesModalOK:function(e){var t=this;e.preventDefault(),Object(p.areEqual)(this.mediaConfigFormData,this.mediaConfigurations)||(this.mediaConfigurations=_.cloneDeep(this.mediaConfigFormData),this.applyMediaConstraints()),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},onDevicesModalCancel:function(e){var t=this;e.preventDefault(),this.$nextTick((function(){t.$bvModal.hide("devicesModal")}))},updatePageConfigs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.configs.meeting.recordingFormatAudio?this.configs.meeting.recordingFormatAudio:"audio/webm",n=this.configs.meeting.recordingFormatVideo?this.configs.meeting.recordingFormatVideo:"video/webm",s={},o=this.mediaConfigurations.recording.type,a=this.mediaConfigurations.recording.mimeType;"video_conference"===this.entity.type.uuid?(s={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,enableWhiteboard:!0},o="video",a=n):"audio_conference"===this.entity.type.uuid?(s={enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!1,enableScreenSharing:!1,enableWhiteboard:!1},o="audio",a=i):"webinar"===this.entity.type.uuid?(s=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,enableHandGesture:!1,enableWhiteboard:!0}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1,enableWhiteboard:!1},o="video",a=n):"live_class"===this.entity.type.uuid?(s=t?{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!0,showEnableVideoBtn:!0,enableWhiteboard:!0}:{enableAudio:!0,enableVideo:!0,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableWhiteboard:!1},o="video",a=n):"podcast"===this.entity.type.uuid&&(s=t?{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!0,showEnableVideoBtn:!1,enableScreenSharing:!1,enableHandGesture:!1,enableWhiteboard:!1}:{enableAudio:!0,enableVideo:!1,showEnableAudioBtn:!1,showEnableVideoBtn:!1,enableScreenSharing:!1,enableFileSharing:!1,enableRecording:!1,enableHandGesture:!1,enableWhiteboard:!1},o="audio",a=i),s.objForEach((function(t,i){return e.pageConfigs[i]=t})),this.mediaConfigurations.recording.type=o,this.mediaConfigurations.recording.mimeType=a,this.rtcmConnection.extra.audioMuted=!this.pageConfigs.enableAudio,this.rtcmConnection.extra.videoMuted=!this.pageConfigs.enableVideo,this.rtcmConnection.extra.isHandUp=this.isHandUp,this.rtcmConnection.updateExtraData(),this.pageConfigs.enableWhiteboard&&(Object(f.g)("/js/canvas-designer/webrtc-handler.js"),Object(f.g)("/js/canvas-designer/canvas-designer-widget.js"))},destroyPage:function(){window.countdownInterval&&clearInterval(window.countdownInterval),this.SetUiConfig({pageHeaderShow:!0,pageFooterShow:!0}),this.closeConnectionAndStream(),window.Echo&&(window.meetingChannel&&(window.meetingChannel.stopListening("MeetingStatusChanged"),window.meetingChannel.stopListening("NewMessage")),window.Echo.leave("Meeting.".concat(this.uuid))),m.a.isEnabled&&(m.a.off("change"),m.a.off("error"))},getInitialData:function(){var e=this;return this.isLoading=!0,window.Echo?this.Get({uuid:this.uuid}).then((function(t){return t.isInstantMeeting&&(e.pageConfigs.hasAgenda=!1),t.config.objForEach((function(t,i){return e.pageConfigs[i]=t})),e.pageConfigs.disableScroll="grid"===e.pageConfigs.layout||(t.config&&t.config.hasOwnProperty("disableScroll")?t.config.disableScroll:e.pageConfigs.disableScroll),t=e.updateMeetingTimezone(t),e.entity=t,e.updateMeetingRules(),t.roomId&&"live"===t.status&&setTimeout((function(){e.initMediaAndRtcmConnection(),e.rtcmConnection.checkPresence(t.roomId,(function(t,i){e.roomIdAlive=!!t}))}),1e3),e.joinChannel(),e.setupGreenRoom(),t.isInstantMeeting&&!t.isBlocked&&"live"===t.status&&(e.rtcmConnection&&e.rtcmConnection.isInitiator||t.canModerate||"live_class"!==t.type.uuid&&"webinar"!==t.type.uuid)?e.getOnline():e.isLoading=!1,t})).catch((function(t){return e.isLoading=!1,formUtil.handleErrors(t),e.$router.push({name:e.fallBackRoute}),t})):(this.$toasted.error($t("config.pusher.credential_required"),this.$toastConfig.error),void this.$router.push({name:this.fallBackRoute}))},setupGreenRoom:function(){var e=this;this.mediaConfigurations.selectedVideoInput&&(this.getMediaConstraints(),navigator.mediaDevices.getUserMedia({video:this.videoConstraints,audio:this.audioConstraints}).then((function(t){e.localGreenRoomStream=t,e.$refs.greenRoomVideo&&(e.$refs.greenRoomVideo.srcObject=t),setTimeout((function(){if(e.$refs.greenRoomAudio){var i=new AudioContext,n=i.createAnalyser(),s=i.createMediaStreamSource(t),o=i.createScriptProcessor(2048,1,1);n.smoothingTimeConstant=.8,n.fftSize=1024,s.connect(n),n.connect(o),o.connect(i.destination),Object(b.a)(e.$refs.greenRoomAudio,{width:"sibling",boxGapFraction:.2}),o.onaudioprocess=function(){var t=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(t);for(var i=0,s=t.length,o=0;o<s;o++)i+=t[o];var a=i/s,r=Math.round(a);e.micVolumeActivity=r<0?0:r}}}),1e3)})).catch((function(t){console.log("navigator.MediaDevices.getUserMedia error: ",t.message,t.name),"NotAllowedError"!==t.name&&"PermissionDeniedError"!==t.name||(e.permissionRejected=!0)})))},setupMediaDevices:function(){var e=this;this.isLoading=!0;this.mediaDevices.audioInput=[],this.mediaDevices.audioOutput=[],this.mediaDevices.videoInput=[],navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){return e.getTracks().forEach((function(e){return e.stop()})),navigator.mediaDevices.enumerateDevices()})).then((function(t){t.forEach((function(t){var i={uuid:t.deviceId};"audioinput"===t.kind?(i.name=t.label||"microphone ".concat(e.mediaDevices.audioInput.length+1),e.mediaDevices.audioInput.push(i)):"audiooutput"===t.kind?(i.name=t.label||"speaker ".concat(e.mediaDevices.audioOutput.length+1),e.mediaDevices.audioOutput.push(i)):"videoinput"===t.kind?(i.name=t.label||"camera ".concat(e.mediaDevices.videoInput.length+1),e.mediaDevices.videoInput.push(i)):console.log("Some other kind of source/device: ",t)})),e.mediaConfigurations.selectedAudioInput=e.mediaDevices.audioInput?e.mediaDevices.audioInput[0]:null,e.mediaConfigurations.selectedVideoInput=e.mediaDevices.videoInput?e.mediaDevices.videoInput[0]:null,e.getInitialData()})).catch((function(t){console.log("navigator.MediaDevices.getUserMedia error: ",t.message,t.name),"NotAllowedError"!==t.name&&"PermissionDeniedError"!==t.name||(e.permissionRejected=!0),e.getInitialData()}))},doInit:function(){this.Init({url:this.initUrl}),window.isDuplicate()&&(this.duplicateTab=!0),this.setupMediaDevices()}}),mounted:function(){var e=this;document.body.classList.add("meeting-page"),this.$route.params.uuid&&(this.uuid=this.$route.params.uuid),m.a.isEnabled&&(m.a.on("change",(function(){e.SetUiConfig({fullScreen:m.a.isFullscreen})})),m.a.on("error",(function(e){console.error("Failed to enable fullscreen",e)})),this.SetUiConfig({fullScreen:!1})),this.doInit(),window.addEventListener("beforeunload",this.beforeUnload),this.checkIfOffline()},created:function(){this.mediaConfigFormData=_.cloneDeep(this.mediaConfigurations),this.SetUiConfig({pageHeaderShow:!1,pageFooterShow:!1}),navigator.connection&&"cellular"===navigator.connection.type&&navigator.connection.downlinkMax<=.115&&alert("2G is not supported. Please use a better internet service.")},beforeRouteEnter:function(e,t,i){e.params.uuid?i((function(e){e.prevRoute=t})):i({name:"appMeetingView"===t?t:"AppMeetingList"})},beforeDestroy:function(){window.isMeetingPageDestroyed||(this.isLoading=!0,this.destroyPage(),this.entity&&"live"===this.entity.status&&this.Custom({url:"/".concat(this.initUrl,"/").concat(this.uuid,"/leave"),method:"post"}),window.isMeetingPageDestroyed=!0)},beforeRouteLeave:function(e,t,i){var n=this,s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(n.isLoading=!0,n.destroyPage(),window.removeEventListener("beforeunload",n.beforeUnload),n.entity&&"live"===n.entity.status?n.Custom({url:"/".concat(n.initUrl,"/").concat(n.uuid,"/leave"),method:"post"}).then((function(e){window.isMeetingPageDestroyed=!0,i()})).catch((function(e){window.isMeetingPageDestroyed=!0,i()})):(window.isMeetingPageDestroyed=!0,i()))};this.hasVideos?formUtil.unsavedCheckAlert({},{unsaved:!0},s,{title:$t("meeting.is_live")}):s()},destroyed:function(){document.body.classList.remove("meeting-page")}},I=i("zfsR"),R=i("bdEB"),D=i("adPT"),$=i("K2Rr"),j=i.n($),E=i("nFxi"),A=i("XuX8"),M=i.n(A),U=i("xjcK"),T=i("pyNs"),F=i("2C+6"),P=i("z3V6"),V=i("jBgq"),B=i("hpAl"),W=i("ex6f"),N=i("qMhD"),z=i("OljW"),H=i("+nMp"),q=Object(P.c)({animated:Object(P.b)(T.f,null),label:Object(P.b)(T.r),labelHtml:Object(P.b)(T.r),max:Object(P.b)(T.m,null),precision:Object(P.b)(T.m,null),showProgress:Object(P.b)(T.f,null),showValue:Object(P.b)(T.f,null),striped:Object(P.b)(T.f,null),value:Object(P.b)(T.m,0),variant:Object(P.b)(T.r)},U.w),G=M.a.extend({name:U.w,mixins:[V.a],inject:{bvProgress:{default:function(){return{}}}},props:q,computed:{progressBarClasses:function(){var e=this.computedAnimated,t=this.computedVariant;return[t?"bg-".concat(t):"",this.computedStriped||e?"progress-bar-striped":"",e?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return Object(z.b)(this.value,0)},computedMax:function(){var e=Object(z.b)(this.max)||Object(z.b)(this.bvProgress.max,0);return e>0?e:100},computedPrecision:function(){return Object(N.d)(Object(z.c)(this.precision,Object(z.c)(this.bvProgress.precision,0)),0)},computedProgress:function(){var e=this.computedPrecision,t=Object(N.f)(10,e);return Object(z.a)(100*t*this.computedValue/this.computedMax/t,e)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return Object(W.b)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(W.b)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(W.b)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(W.b)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(e){var t,i=this.label,n=this.labelHtml,s=this.computedValue,o=this.computedPrecision,a={};return this.hasNormalizedSlot()?t=this.normalizeSlot():i||n?a=Object(B.a)(n,i):this.computedShowProgress?t=this.computedProgress:this.computedShowValue&&(t=Object(z.a)(s,o)),e("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":Object(H.e)(this.computedMax),"aria-valuenow":Object(z.a)(s,o)},domProps:a},t)}});function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach((function(t){X(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function X(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Y=Object(F.i)(q,["label","labelHtml"]),Q=Object(P.c)(Object(F.l)(J(J({},Y),{},{animated:Object(P.b)(T.f,!1),height:Object(P.b)(T.r),max:Object(P.b)(T.m,100),precision:Object(P.b)(T.m,0),showProgress:Object(P.b)(T.f,!1),showValue:Object(P.b)(T.f,!1),striped:Object(P.b)(T.f,!1)})),U.v);function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var te={name:"file-sharer",components:{BProgress:M.a.extend({name:U.v,mixins:[V.a],provide:function(){return{bvProgress:this}},props:Q,computed:{progressHeight:function(){return{height:this.height||null}}},render:function(e){var t=this.normalizeSlot();return t||(t=e(G,{props:Object(P.d)(Y,this.$props)})),e("div",{staticClass:"progress",style:this.progressHeight},[t])}})},props:{connection:{default:null},allowSharing:{default:!0},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.file"},namesLabel:{type:String,default:"upload.files"},closeButtonLabel:{type:String,default:"upload.close"},buttonWrapperClasses:{type:String,default:"justify-content-between"},buttonClasses:{type:String,default:""},closeButtonClasses:{type:String,default:"btn-light"},buttonIcon:{type:String,default:"fas fa-upload"},buttonDesign:{type:String,default:"primary"},options:{type:Object,default:function(){return{allowedExtensions:["jpg","png","jpeg","pdf","doc","docx","xls","xlsx","txt"],maxNoOfFiles:20,allowedMaxFileSize:null}}},multiple:{type:Boolean,default:!1},hideButtonLabel:{type:Boolean,default:!1},showCloseButton:{type:Boolean,default:!0},autoSend:{type:Boolean,default:!0}},data:function(){return{icons:E.b,mimeTypes:E.c,sharingFiles:[],lastSelectedFile:null,incomingRequest:{show:!1,sender:null,fileId:null}}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){ee(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(s.c)("config",["configs","vars"])),watch:{connection:function(e,t){e&&null===t&&this.setupConnection()}},methods:{getFileIcon:function(e){return this.icons[e]||"fa-file-alt"},getFileNameIcon:function(e){return this.icons[e]||"fa-file-alt"},generateFilesList:function(e){var t=this,i=null,n=this.$refs.filesInput.files;if(this.options.allowedExtensions&&(i=new RegExp("(."+this.options.allowedExtensions.join("|.")+")$")),this.options.maxNoOfFiles&&n.length>this.options.maxNoOfFiles)this.$toasted.error(this.$t("upload.max_file_limit_crossed",{number:this.options.maxNoOfFiles}),this.$toastConfig.error);else{for(var s=function(e){var s="".concat(n[e].size,"-").concat(n[e].name),o=t.sharingFiles.findIndex((function(e){return e.fileId===s}));if(i&&!i.test(n[e].name))t.$toasted.error(t.$t("global.file_not_supported",{attribute:n[e].name.split(".").pop()}),t.$toastConfig.error);else if(t.options.allowedMaxFileSize&&n[e].size>t.options.allowedMaxFileSize)t.$toasted.error(t.$t("global.file_too_large",{attribute:n[e].name}),t.$toastConfig.error);else if(-1===o){var a={uuid:"",name:n[e].name,size:n[e].size,type:n[e].type,humanSize:Object(f.a)(n[e].size),fileId:s,url:"",sendingTo:[],progress:{value:0,max:0,percent:0,status:"starting"}};t.sharingFiles.unshift(a),t.lastSelectedFile=n[e]}},o=0;o<n.length;o++)s(o);this.autoSend&&this.connection&&this.connection.send({doYouWannaReceiveThisFile:!0,sender:this.connection.extra,fileId:"".concat(this.lastSelectedFile.size,"-").concat(this.lastSelectedFile.name)})}},rejectIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({noIDoNotWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},acceptIncomingFile:function(){this.incomingRequest.show=!1,this.connection.send({yesIWannaReceive:!0,sender:this.connection.extra,fileId:this.incomingRequest.fileId}),this.incomingRequest.sender=null,this.incomingRequest.fileId=null},rtcmOnOpen:function(e){var t=this;try{chrome.power.requestKeepAwake("display")}catch(e){}this.connection.connectedWith[e.userid]||(this.connection.connectedWith[e.userid]=!0,this.lastSelectedFile&&window.setTimeout((function(){t.autoSend&&t.connection&&t.connection.send({doYouWannaReceiveThisFile:!0,sender:t.connection.extra,fileId:"".concat(t.lastSelectedFile.size,"-").concat(t.lastSelectedFile.name)})}),500))},rtcmOnClose:function(e){},rtcmOnLeave:function(e){},rtcmOnMessage:function(e){e.data.doYouWannaReceiveThisFile?this.connection.fileReceived[e.data.fileId]||(this.incomingRequest.fileId=e.data.fileId,this.incomingRequest.sender=e.data.sender,this.incomingRequest.show=!0,this.$emit("show")):e.data.yesIWannaReceive&&this.lastSelectedFile?this.connection.shareFile(this.lastSelectedFile,e.userid):e.data.noIDoNotWannaReceive&&this.lastSelectedFile},rtcmOnFileStart:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.userid!==this.connection.userid&&(this.sharingFiles.unshift({uuid:"",name:e.name,size:e.size,type:e.type,humanSize:Object(f.a)(e.size),fileId:t,url:"",receivingFrom:null,progress:{value:0,max:0,percent:0,status:"starting"}}),this.$emit("show"));var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var n=this.sharingFiles[i];if(n.uuid=e.uuid,n.userid=e.userid,e.userid===this.connection.userid){if(n.sendingTo||(n.sendingTo=[]),n.sendingTo.length>0&&-1!==n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})))return;n.sendingTo.unshift({userid:e.remoteUserId,progress:{value:0,percent:0,max:e.maxChunks,status:"starting"}})}else n.receiveAgain=!0,n.receivingFrom=e.userid,n.progress.max=e.maxChunks,n.progress.status="starting"}}},rtcmOnFileProgress:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){var i=this.sharingFiles.findIndex((function(t){return t.uuid===e.uuid}));if(-1!==i){var n=this.sharingFiles[i];if(e.remoteUserId&&n.sendingTo){var s=n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId})),o=n.sendingTo[s];if(!o)return;o.progress.value=e.currentPosition,o.progress=this.updateProgress(o.progress,!0)}else n.progress.value=e.currentPosition,n.progress=this.updateProgress(n.progress,!1)}}},rtcmOnFileEnd:function(e){var t="".concat(e.size,"-").concat(e.name);if(!this.connection.fileReceived[t]){e.remoteUserId===this.connection.userid&&(this.connection.fileReceived[t]=e);var i=this.sharingFiles.findIndex((function(e){return e.fileId===t}));if(-1!==i){var n=this.sharingFiles[i];if(n.url=e.url,e.remoteUserId&&n.sendingTo){var s=n.sendingTo.findIndex((function(t){return t.userid===e.remoteUserId}));n.sendingTo[s].progress.status="sent"}else n.progress.status="received"}}},rtcmOnError:function(e){},updateProgress:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.value||-1===e.value)return e.percent=0,e;var i=parseInt((e.value/e.max*100).toFixed(0));return e.status=t?i>100?"sent":"sending - "+i+"%":i>100?"received":"receiving - "+i+"%",e.percent=i>100?100:i,e},setupConnection:function(){this.connection.enableFileSharing=!0,this.connection.fileReceived={},this.connection.connectedWith={},this.connection.chunkSize=15e3,this.connection.onopen=this.rtcmOnOpen,this.connection.onclose=this.rtcmOnClose,this.connection.onleave=this.rtcmOnLeave,this.connection.onmessage=this.rtcmOnMessage,this.connection.onerror=this.rtcmOnError,this.connection.onFileStart=this.rtcmOnFileStart,this.connection.onFileProgress=this.rtcmOnFileProgress,this.connection.onFileEnd=this.rtcmOnFileEnd}},mounted:function(){this.connection&&this.setupConnection()},destroyed:function(){}},ie=i("KHd+"),ne=Object(ie.a)(te,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-uploader file-uploader file-sharer"},[i("div",{class:["files-list-wrapper"]},[e.incomingRequest.show?i("div",{staticClass:"file-incoming-request"},[i("div",{staticClass:"alert fade show alert-white"},[i("div",{staticClass:"alert-content"},[i("h6",[i("strong",[e._v(e._s(e.incomingRequest.sender.name))]),i("span",{staticClass:"text-muted mx-1"},[e._v(e._s(e.$t("upload.wants_to_share_file")))]),i("strong",[e._v(e._s(e.incomingRequest.fileId))])])]),e._v(" "),i("div",{staticClass:"d-flex justify-content-start mt-3"},[i("button",{staticClass:"btn btn-sm btn-danger flex-grow",attrs:{type:"button"},on:{click:e.rejectIncomingFile}},[e._v(e._s(e.$t("upload.reject")))]),e._v(" "),i("button",{staticClass:"btn btn-sm btn-success flex-grow",attrs:{type:"button"},on:{click:e.acceptIncomingFile}},[e._v(e._s(e.$t("upload.accept")))])])])]):e._e(),e._v(" "),e.sharingFiles.length?i("ul",{staticClass:"files-list"},e._l(e.sharingFiles,(function(t,n){return i("li",{key:t.fileId,staticClass:"file-details-row"},[i("div",{staticClass:"file-details-wrapper"},[i("div",{staticClass:"file-icon"},[i("span",[i("i",{class:["far",e.getFileIcon(t.type)]})])]),e._v(" "),i("div",{staticClass:"file-details"},[i("h6",[e._v(e._s(t.name))]),e._v(" "),i("p",[i("span",[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.type")))]),e._v(": "+e._s(e.mimeTypes[t.type]||"Unknown"))]),e._v(" "),i("span",{staticClass:"ml-1"},[i("span",{staticClass:"font-weight-700"},[e._v(e._s(e.$t("upload.size")))]),e._v(": "+e._s(t.humanSize))])]),e._v(" "),t.sendingTo?i("div",{staticClass:"sharing-details-wrapper"},e._l(t.sendingTo,(function(t){return i("div",{key:t.userid,staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                        Sending to: "+e._s(t.userid)+"\n                                    ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"sent"===t.progress.status},{"badge-info":"sent"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1)})),0):t.receivingFrom?i("div",{staticClass:"sharing-row mt-2"},[i("div",{staticClass:"sharing-details small"},[i("div",{staticClass:"flex-grow text-muted"},[e._v("\n                                    Receiving From: "+e._s(t.receivingFrom)+"\n                                ")]),e._v(" "),i("div",[i("span",{class:["badge badge-sm badge-pill",{"badge-success":"received"===t.progress.status},{"badge-info":"received"!==t.progress.status}]},[e._v(e._s(t.progress.status))])])]),e._v(" "),i("b-progress",{staticClass:"mt-2 mb-0",attrs:{value:t.progress.percent,max:100}})],1):e._e()]),e._v(" "),i("div",{staticClass:"status-wrapper"},[t.receivingFrom&&"received"!==t.progress.status?e._e():i("a",{staticClass:"status-action",attrs:{href:t.url,target:"_blank",download:t.name}},[e._m(0,!0)])])])])})),0):e._e()]),e._v(" "),i("div",{staticClass:"file-uploader-form"},[i("div",{class:["file-selector d-flex",e.buttonWrapperClasses]},[e.showCloseButton?i("button",{class:["btn",e.closeButtonClasses],attrs:{type:"button"},on:{click:function(t){return e.$emit("hide")}}},[e._m(1),e._v(" "),i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.closeButtonLabel)))])]):e._e(),e._v(" "),e.allowSharing?[i("label",{class:["btn","btn-"+e.buttonDesign,e.buttonClasses]},[i("input",{ref:"filesInput",staticClass:"selector-input",attrs:{name:"filesInput",type:"file",id:"filesInput",multiple:e.multiple},on:{change:e.generateFilesList}}),e._v(" "),i("span",{staticClass:"button-icon"},[i("i",{class:e.buttonIcon})]),e._v(" "),e.hideButtonLabel?e._e():i("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.actionLabel,{attribute:e.$t(e.namesLabel)})))])])]:e._e()],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"fas fa-download"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"button-icon"},[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null).exports,se={mixins:[I.a,k,n.a],components:{AppLogo:R.a,AnimatedNumber:D.a,FlipCountdown:j.a,FileSharer:ne},watch:{locked:function(e,t){if(e){var i=this.$route.fullPath;this.$router.push({name:"authLock",query:{ref:i}})}}},methods:{}},oe=(i("eC/g"),Object(ie.a)(se,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-container",{class:["meeting-page",{"auto-hide-footer":e.pageConfigs.footerAutoHide&&e.hasVideos},{pulse:e.recording},{"mirrored-video":e.configs.meeting&&e.configs.meeting.mirroredVideo}],attrs:{"with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor,"overlay-color":e.uiConfigs.pageColorSchemeType,"loader-size":"screen","data-page-background-color":e.uiConfigs.pageBackgroundColor,"data-card-background-color":e.uiConfigs.pageContainerBackgroundColor}},[e.duplicateTab?i("card",{staticClass:"duplicate-tab d-flex justify-content-center align-items-center min-height-90vh",attrs:{shadow:""}},[i("h2",[e._v(e._s(e.$t("meeting.duplicate_tab")))])]):[i("div",{class:["meeting-footer",{"has-videos":e.hasVideos}],attrs:{"data-footer-background-color":e.uiConfigs.leftSidebarColor}},[i("div",{staticClass:"logo-wrapper"},[i("app-logo",{attrs:{place:"sidebar",size:"sm",tag:"span"}})],1),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?i("div",{staticClass:"meeting-actions meeting-actions-center"},[e.localVideo&&e.pageConfigs.showEnableAudioBtn?[e.pageConfigs.enableAudio?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_audio")},on:{click:e.toggleAudio}},[i("i",{staticClass:"fas fa-microphone-slash"})])]:e._e(),e._v(" "),e.localVideo&&e.pageConfigs.showEnableVideoBtn?[e.pageConfigs.enableVideo?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.mute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text",attrs:{type:"button",title:e.$t("meeting.unmute_video")},on:{click:e.toggleVideo}},[i("i",{staticClass:"fas fa-video-slash"})])]:e._e(),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-sm-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.media_devices.setup")},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"})]):e._e(),e._v(" "),e.pageConfigs.enableFileSharing?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action d-none d-lg-inline-block",{"disabled-text":e.showFileSharing}],attrs:{type:"button",title:e.$t("upload.share_files")},on:{click:e.toggleFileSharing}},[i("i",{staticClass:"fas fa-upload"})]):e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text",attrs:{type:"button",title:e.$t("meeting.leave_meeting")},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"})]),e._v(" "),e.pageConfigs.enableScreenSharing?[e.localScreenStreamid?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action disabled-text d-none d-lg-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_sharing_screen")},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-lg-inline-block",attrs:{type:"button",title:e.$t("meeting.share_screen")},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"})])]:e._e(),e._v(" "),e.pageConfigs.enableRecording?[e.recording?[e.recordingPaused?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.resume_recording")},on:{click:e.resumeRecording}},[i("i",{staticClass:"fas fa-circle"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.pause_recording")},on:{click:e.pauseRecording}},[i("i",{staticClass:"fas fa-pause"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.stop_recording")},on:{click:e.stopRecording}},[i("i",{staticClass:"fas fa-stop"}),e._v(" "),i("span",{staticClass:"recording_time"},[e._v(e._s(e.recordingDuration))])])]:i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.start_recording")},on:{click:e.startRecording}},[i("i",{staticClass:"fas fa-circle"})])]:e._e(),e._v(" "),e.pageConfigs.enableWhiteboard?[e.showWhiteboard?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.hide_whiteboard")},on:{click:e.toggleWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher"})]):e._e(),e._v(" "),e.showWhiteboard?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action danger-text d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.clear_hide_whiteboard")},on:{click:e.hideAndDestroyWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher mr-0"}),i("i",{staticClass:"fas fa-times font-size-xs ml-1 font-size-xs text-danger"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action d-none d-md-inline-block",attrs:{type:"button",title:e.$t("meeting.show_whiteboard")},on:{click:e.toggleWhiteboard}},[i("i",{staticClass:"fas fa-chalkboard-teacher"})])]:e._e(),e._v(" "),e.pageConfigs.enableHandGesture?[e.isHandUp?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action success-text",attrs:{type:"button",title:e.$t("meeting.lower_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"far fa-hand-paper"})]):i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action",attrs:{type:"button",title:e.$t("meeting.raise_hand")},on:{click:e.toggleHandUp}},[i("i",{staticClass:"fas fa-hand-paper"})])]:e._e()],2):e._e(),e._v(" "),i("div",{staticClass:"meeting-actions meeting-actions-right"},[e.entity?[e.entity.status&&e.videoList.length&&"presentation"!==e.pageConfigs.layout?i("base-dropdown",{staticClass:"more-actions d-none d-md-inline-block",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"btn action grid-toggle-btn d-none d-md-inline-block",attrs:{slot:"title",type:"button",title:e.$t("meeting.change_layout")},slot:"title"},[i("i",{staticClass:"fas fa-th-large"})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("grid")}}},[e._v(e._s(e.$t("meeting.grid_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"grid"===e.pageConfigs.layout}})]),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("gallery")}}},[e._v(e._s(e.$t("meeting.gallery_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"gallery"===e.pageConfigs.layout}})]),e._v(" "),e.pageConfigs.hasAgenda||e.pageConfigs.enableWhiteboard&&e.showWhiteboard?i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("presentation")}}},[e._v(e._s(e.$t("meeting.presentation_layout"))+" "),i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"presentation"===e.pageConfigs.layout}})]):e._e(),e._v(" "),i("button",{staticClass:"dropdown-item d-flex justify-content-between align-items-center",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("fullpage")}}},[e._v(e._s(e.$t("meeting.fullpage_layout"))+" "),"fullpage"===e.pageConfigs.layout?i("i",{staticClass:"fas fa-check min-width-auto text-light",class:{"text-dark":"fullpage"===e.pageConfigs.layout}}):e._e()])]):e._e(),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.subscriptions&&e.subscriptions.userPrivate&&!e.entity.isBlocked?i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],class:["btn action chats-toggle-btn",{pulse:e.totalUnreadMessages&&e.totalUnreadMessages>0&&!e.isChatBoxShown}],attrs:{type:"button",title:e.$t(e.isChatBoxShown?"global.hide":"global.show",{attribute:e.$t("chat.chats")})},on:{click:e.toggleChatBox}},[i("i",{class:[e.isChatBoxShown?"fas fa-comment-slash":"far fa-comment"]}),e._v(" "),e.totalUnreadMessages&&e.totalUnreadMessages>0?i("span",{staticClass:"text-success unread-count"},[e._v(e._s(e.totalUnreadMessages))]):e._e()]):e._e()]:e._e(),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action more-actions-btn",attrs:{slot:"title",type:"button"},slot:"title"},[i("i",{staticClass:"fas fa-ellipsis-v"})]),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.getOffline}},[i("i",{staticClass:"fas fa-phone-slash"}),e._v(" "+e._s(e.$t("meeting.leave_meeting")))]):i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[i("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.back")))]),e._v(" "),e.entity&&e.entity.status&&e.entity.canModerate&&"live"===e.entity.status?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.endMeeting}},[i("i",{staticClass:"fas fa-calendar-times"}),e._v(" "+e._s(e.$t("meeting.end_meeting")))]):e._e(),e._v(" "),i("div",{staticClass:"dropdown-divider my-1",attrs:{role:"separator"}}),e._v(" "),e.pageConfigs.hasAgenda?i("button",{staticClass:"dropdown-item agenda-toggle-btn",attrs:{type:"button"},on:{click:e.toggleAgenda}},[i("i",{staticClass:"fas fa-quote-left"}),e._v(" "+e._s(e.$t(e.showAgenda?"global.hide":"global.show",{attribute:e.$t("general.agenda")})))]):e._e(),e._v(" "),i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.toggleFooterAutoHide}},[i("i",{staticClass:"fas fa-hourglass-start"}),e._v(" "+e._s(e.$t(e.pageConfigs.footerAutoHide?"meeting.toggle_autohide_off":"meeting.toggle_autohide_on")))]),e._v(" "),e.uiConfigs.fullScreen?i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!1)}}},[i("i",{staticClass:"fas fa-compress"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))]):i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:function(t){return e.toggleFullScreen(!0)}}},[i("i",{staticClass:"fas fa-expand"}),e._v(" "+e._s(e.$t("config.ui.toggle_fullscreen")))]),e._v(" "),i("div",{staticClass:"dropdown-divider my-1",attrs:{role:"separator"}}),e._v(" "),i("button",{staticClass:"dropdown-item d-md-none",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("grid")}}},[i("i",{staticClass:"fas fa-check text-light",class:{"text-dark":"grid"===e.pageConfigs.layout}}),e._v(" "+e._s(e.$t("meeting.grid_layout")))]),e._v(" "),i("button",{staticClass:"dropdown-item d-md-none",attrs:{type:"button"},on:{click:function(t){return e.toggleLayout("fullpage")}}},[i("i",{staticClass:"fas fa-check text-light",class:{"text-dark":"fullpage"===e.pageConfigs.layout}}),e._v(" "+e._s(e.$t("meeting.fullpage_layout")))]),e._v(" "),i("div",{staticClass:"dropdown-divider my-1",attrs:{role:"separator"}}),e._v(" "),e.pageConfigs.showDeviceConfig?i("button",{staticClass:"dropdown-item show-devices-btn",attrs:{type:"button"},on:{click:e.toggleDevicesModal}},[i("i",{staticClass:"fas fa-cogs"}),e._v(" "+e._s(e.$t("meeting.media_devices.setup")))]):e._e(),e._v(" "),e.entity&&e.entity.status&&e.videoList.length?[e.pageConfigs.enableFileSharing?i("button",{staticClass:"dropdown-item file-sharing-btn",attrs:{type:"button"},on:{click:e.toggleFileSharing}},[i("i",{staticClass:"fas fa-upload"}),e._v(" "+e._s(e.$t("upload.share_files")))]):e._e(),e._v(" "),e.pageConfigs.enableScreenSharing?[e.localScreenStreamid?i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.stopSharingScreen}},[i("i",{staticClass:"fas fa-minus-square"}),e._v(" "+e._s(e.$t("meeting.stop_sharing_screen")))]):i("button",{staticClass:"dropdown-item d-none d-md-block",attrs:{type:"button"},on:{click:e.shareScreen}},[i("i",{staticClass:"fas fa-desktop"}),e._v(" "+e._s(e.$t("meeting.share_screen")))])]:e._e()]:e._e(),e._v(" "),e.pageConfigs.enableLinkSharing?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:e.shareURL}},[i("i",{staticClass:"fas fa-share-alt"}),e._v(" "+e._s(e.$t("general.share_url")))]):e._e()],2),e._v(" "),i("base-dropdown",{staticClass:"more-actions",attrs:{tag:"div",direction:"up","menu-classes":"show-dropdown-up",position:"right"}},[i("button",{staticClass:"btn action grid-toggle-btn d-none d-md-inline-block px-1",attrs:{slot:"title",type:"button"},slot:"title"},[e.loggedInUser?i("user-avatar",{attrs:{user:e.loggedInUser,size:40,color:e.vars.colors[e.uiConfigs.topNavbarColor]}}):e._e()],1),e._v(" "),i("h6",{staticClass:"dropdown-header"},[e._v(e._s(e.$t("general.greeting")+", "+e.loggedInUser.name))]),e._v(" "),e.loggedInUser?i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appProfileView"}}},[i("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.$t("user.your_profile"))+"\n                    ")]):e._e(),e._v(" "),e.hasPermission("access-config")?e._e():i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserPreference"}}},[i("i",{staticClass:"fas fa-user-cog"}),e._v(" "+e._s(e.$t("user.user_preference"))+"\n                    ")]),e._v(" "),i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"appUserChangePassword"}}},[i("i",{staticClass:"fas fa-key"}),e._v(" "+e._s(e.$t("auth.password.change_password"))+"\n                    ")])],1)],2)]),e._v(" "),i("div",{class:["agenda-streams-container",{"has-agenda":e.pageConfigs.hasAgenda||e.hasVideos&&e.pageConfigs.enableWhiteboard},{"agenda-visible":e.showAgenda||e.hasVideos&&e.showWhiteboard}]},[e.entity&&!e.entity.isBlocked?[e.pageConfigs.hasAgenda&&!e.showWhiteboard?[i("card",{staticClass:"agenda-container",attrs:{shadow:"","body-classes":"agenda-wrapper"}},[i("div",{staticClass:"meeting-agenda-container"},[i("vue-scroll",{ref:"vue-scroll-agenda",attrs:{id:"vue-scroll-agenda"}},[e.entity?[e._m(0),e._v(" "),i("div",{staticClass:"text-muted mt-3"},[e._m(1),e._v(" "),e._m(2)]),e._v(" "),i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.agenda"),value:e.entity.agenda}}),e._v(" "),e.entity.description?i("view-paragraph",{staticClass:"mt-3",attrs:{label:e.$t("meeting.props.description"),value:e.entity.description,html:""}}):e._e(),e._v(" "),e.entity.attachments?i("view-uploads",{class:["mt-3",e.uiConfigs.colorSchemeType],attrs:{label:e.$t("upload.attachments"),"name-label":e.$t("upload.attachment"),value:e.entity.attachments,"download-button-classes":"text-gray","url-prefix":"/meetings/"+e.uuid+"/downloads"}}):e._e()]:e._e()],2)],1)])]:e._e(),e._v(" "),e.hasVideos&&e.pageConfigs.enableWhiteboard&&!e.showAgenda?[i("card",{staticClass:"whiteboard-container",attrs:{shadow:"","body-classes":"whiteboard-wrapper"}},[i("div",{staticClass:"meeting-whiteboard-container"},[i("vue-scroll",{ref:"vue-scroll-whiteboard",attrs:{id:"vue-scroll-whiteboard"}},[i("div",{ref:"whiteboard",staticClass:"whiteboard",attrs:{id:"whiteboard"}})])],1)])]:e._e()]:e._e(),e._v(" "),i("div",{class:["streams-container",e.hasVideos?"stream-"+e.pageConfigs.layout+"-layout":""]},[i("div",{ref:"videoListEle",class:["video-list",e.hasVideosClasses]},[e.hasVideos?e._l(e.videoList,(function(t,n){return i("div",{key:""+t.uuid+t.id,class:["video-item video-card",{maximized:t.maximized},{local:t.local},{screen:t.screen},{whiteboard:t.whiteboard},{"fullscreen-item":t.id===e.fullScreenItemId},{"hand-up":t.isHandUp},{"user-speaking":t.speaking},{"audio-muted":t.audioMuted},{"video-muted":t.videoMuted||!t.hasVideo},{"no-stream":!t.status},{"disable-mirror":t.disableMirror}],on:{dblclick:function(i){return e.changeFocus(t)}}},[i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videos",refInFor:!0,class:[{"no-poster":t.status&&!t.videoMuted}],attrs:{autoplay:"",playsinline:"",id:t.id,poster:t.status?null:"/images/video/no-stream.jpg"},domProps:{muted:t.muted}}),e._v(" "),i("div",{staticClass:"caption"},[i("h6",[i("span",{class:["text-xs mr-1",{"text-success":t.status},{"text-danger":!t.status}]},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),t.local?[e._v("\n                                            "+e._s(t.screen?e.$t("meeting.your_screen"):t.whiteboard?e.$t("meeting.your_whiteboard"):e.$t("meeting.you"))+"\n                                        ")]:[e._v("\n                                            "+e._s(t.screen?""+t.name+e.$t("meeting.screen"):t.whiteboard?""+t.name+e.$t("meeting.whiteboard"):t.name)+"\n                                        ")],e._v(" "),t.status?e._e():i("span",{staticClass:"bracketed text-danger"},[e._v(e._s(e.$t("meeting.left")))])],2)]),e._v(" "),i("div",{staticClass:"highlight-border"})]),e._v(" "),t.local?t.local&&t.isHandUp?i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})])])]):e._e():i("div",{staticClass:"custom-controls-wrapper"},[i("div",{staticClass:"custom-controls"},[t.isHandUp?i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-hand-paper enabled-text"})]):e._e(),e._v(" "),e.entity.canModerate||!t.audioMuted||t.videoMuted?e._e():i("div",{staticClass:"status-icon"},[i("i",{staticClass:"fas fa-microphone-slash disabled-text"})]),e._v(" "),i("button",{on:{click:function(i){return e.disableMirror(t,n)}}},[i("i",{staticClass:"fas fa-exchange-alt enabled-text"})]),e._v(" "),e.entity.canModerate?[i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.kick_ban_participant")},on:{click:function(i){return e.kickRemoteUser(t,n)}}},[i("i",{staticClass:"fas fa-ban enabled-text"})]),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.mute_participant_source")},on:{click:function(i){return e.toggleRemoteAudioSource(t,n)}}},[i("i",{class:["fas",{"fa-microphone enabled-text":!t.audioMuted},{"fa-microphone-slash disabled-text":t.audioMuted}]})])]:e._e(),e._v(" "),i("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],attrs:{title:e.$t("meeting.mute_participant")},on:{click:function(i){return e.toggleRemoteAudio(t,n)}}},[i("i",{class:["fas",{"fa-volume-up enabled-text":!t.muted},{"fa-volume-off disabled-text":t.muted}]})])],2)])])})):i("card",{staticClass:"video-item wait-box maximized",attrs:{shadow:""}},[e.entity&&!e.entity.isBlocked?["scheduled"===e.entity.status||"live"===e.entity.status?[i("div",{staticClass:"green-room text-center mt-3"},[i("video",{ref:"greenRoomVideo",attrs:{autoplay:"",playsinline:"",muted:"",id:"greenRoomVideo"},domProps:{muted:!0}}),e._v(" "),i("br"),e._v(" "),i("canvas",{ref:"greenRoomAudio",staticStyle:{margin:"0 auto"},attrs:{id:"greenRoomAudio",width:"250",height:"15","data-val":e.micVolumeActivity}},[e._v("No canvas")])])]:e._e(),e._v(" "),"scheduled"===e.entity.status?[e.startDateTimeIsFuture?i("flip-countdown",{staticClass:"my-3",attrs:{deadline:e.entity.startDateTime}}):[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                    ")])],e._v(" "),i("div",{staticClass:"text-center my-3"},[i("span",{staticClass:"text-muted"},[e._v(e._s(e.$t("meeting.scheduled_for")))]),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.d500",modifiers:{hover:!0,d500:!0}}],staticClass:"text-muted-lg m-l-5",attrs:{title:e._f("momentDateTime")(e.entity.startDateTime)}},[e._v(e._s(e._f("momentCalendar")(e.entity.startDateTime,{sameElse:e.vars.defaultDateTimeFormat})))])]),e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e(),e._v(" "),e.entity.canModerate?[i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"gray-darker",size:"sm"},on:{click:e.cancelMeeting}},[i("i",{staticClass:"fas fa-times m-r-5"}),e._v(" "+e._s(e.$t("meeting.cancel")))]),e._v(" "),i("base-dropdown",{attrs:{tag:"div",size:"sm",direction:"up"}},[i("base-button",{attrs:{slot:"title",type:"button",design:"gray-darker",size:"sm","data-toggle":"dropdown",role:"button"},slot:"title"},[i("i",{staticClass:"far fa-clock m-r-5"}),e._v(" "),i("span",{staticClass:"nav-link-inner--text"},[e._v(e._s(e.$t("meeting.snooze")))]),e._v(" "),i("i",{staticClass:"fas fa-chevron-up m-l-5"})]),e._v(" "),e._l(e.snoozeOpts,(function(t){return i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(i){return e.snoozeMeeting(t.uuid)}}},[e._v(e._s(t.name)+" "+e._s(e.$t("list.general.durations."+t.type)))])}))],2)],1)]:e._e()]:"live"===e.entity.status?[e.roomIdAlive?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.is_live_now"))+"\n                                    ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:[e.entity.canModerate?[i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                            "+e._s(e.$t("meeting.waiting_for_you_to_start"))+"\n                                        ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center my-3"},[i("base-button",{attrs:{type:"button",design:"primary",size:"lg"},on:{click:e.getOnline}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("meeting.get_live")})))])],1)]:i("h5",{staticClass:"text-muted text-center my-3"},[e._v("\n                                        "+e._s(e.$t("meeting.starting_any_time_now"))+"\n                                    ")])],e._v(" "),e.liveMembersCount>0?i("div",{staticClass:"text-muted text-center my-3"},[i("span",{staticClass:"text-xs text-success mr-1"},[i("i",{staticClass:"fas fa-circle"})]),e._v(" "),i("animated-number",{attrs:{number:e.liveMembersCount,delay:100}}),e._v(" "),e.liveMembersCount>1?i("span",[e._v(e._s(e.$t("meeting.members_online")))]):i("span",[e._v(e._s(e.$t("meeting.member_online")))])],1):e._e()]:"cancelled"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_cancelled"))+"\n                                ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:"ended"===e.entity.status?[i("h4",{staticClass:"text-muted text-center my-3"},[e._v("\n                                    "+e._s(e.$t("meeting.meeting_ended"))+"\n                                ")]),e._v(" "),i("div",{staticClass:"d-flex justify-content-center"},[i("base-button",{attrs:{type:"button",design:"light",size:"lg"},on:{click:function(t){return e.$router.push({name:"appMeetingList"})}}},[e._v(e._s(e.$t("global.click_to",{attribute:e.$t("general.go_back")})))])],1)]:e._e()]:[e.entity?i("h3",{staticClass:"text-center text-danger my-3"},[e._v("\n                                "+e._s(e.$t("meeting.not_allowed"))+"\n                            ")]):e._e()]],2)],2)])],2),e._v(" "),e.pageConfigs.enableChat&&e.configs.chat&&e.configs.chat.enabled&&e.entity&&!e.entity.isBlocked?i("div",{staticClass:"chat-box-container"},[e.isChatBoxShown?i("chat-box",{attrs:{"box-visibility":e.isChatBoxShown,meeting:e.entity,channel:e.subscriptions.userPrivate},on:{boxHidden:function(t){e.isChatBoxShown=!1},boxShown:function(t){e.isChatBoxShown=!0}}}):e._e()],1):e._e(),e._v(" "),i("b-modal",{attrs:{size:"md",centered:"",lazy:"",busy:e.isLoading,id:"devicesModal","no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:e.onDevicesModalOK,cancel:e.onDevicesModalCancel},model:{value:e.showDevicesModal,callback:function(t){e.showDevicesModal=t},expression:"showDevicesModal"}},[i("template",{slot:"modal-header"},[i("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("meeting.media_devices.video_and_audio_devices")))])]),e._v(" "),i("div",[i("base-select",{attrs:{options:e.mediaDevices.audioInput,label:e.$t("meeting.media_devices.audio_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedAudioInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedAudioInput",t)},expression:"mediaConfigFormData.selectedAudioInput"}}),e._v(" "),i("base-select",{attrs:{options:e.mediaDevices.videoInput,label:e.$t("meeting.media_devices.video_input"),"allow-empty":!1,"preselect-first":""},model:{value:e.mediaConfigFormData.selectedVideoInput,callback:function(t){e.$set(e.mediaConfigFormData,"selectedVideoInput",t)},expression:"mediaConfigFormData.selectedVideoInput"}}),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.resolutions,label:e.$t("meeting.media_devices.video_resolution"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"label","show-by":"label"},model:{value:e.mediaConfigFormData.selectedResolution,callback:function(t){e.$set(e.mediaConfigFormData,"selectedResolution",t)},expression:"mediaConfigFormData.selectedResolution"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.frameRates,label:e.$t("meeting.media_devices.frame_rate"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.frameRate,callback:function(t){e.$set(e.mediaConfigFormData,"frameRate",t)},expression:"mediaConfigFormData.frameRate"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-md-4"},[i("base-select",{attrs:{options:e.mediaDevices.facingModes,label:e.$t("meeting.media_devices.facing_mode"),"allow-empty":!1,"preselect-first":"",simple:"","track-by":"uuid","show-by":"label"},model:{value:e.mediaConfigFormData.facingMode,callback:function(t){e.$set(e.mediaConfigFormData,"facingMode",t)},expression:"mediaConfigFormData.facingMode"}})],1),e._v(" "),i("div",{staticClass:"col-12"},[i("h6",{staticClass:"mt-2 pb-1"},[e._v(e._s(e.$t("meeting.media_devices.bitrates")))])]),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.audio"),type:"number",min:6,max:510},model:{value:e.mediaConfigFormData.bandwidth.audio,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"audio",t)},expression:"mediaConfigFormData.bandwidth.audio"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.video"),type:"number",min:100,max:14e3},model:{value:e.mediaConfigFormData.bandwidth.video,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"video",t)},expression:"mediaConfigFormData.bandwidth.video"}})],1),e._v(" "),i("div",{staticClass:"col-12 col-sm-4"},[i("base-input",{attrs:{label:e.$t("meeting.media_devices.screen"),type:"number",min:300,max:14e3},model:{value:e.mediaConfigFormData.bandwidth.screen,callback:function(t){e.$set(e.mediaConfigFormData.bandwidth,"screen",t)},expression:"mediaConfigFormData.bandwidth.screen"}})],1)])],1)],2),e._v(" "),e.pageConfigs.enableFileSharing?i("div",{class:["files-sharing-box d-none",{"d-flex":e.showFileSharing}]},[i("card",{staticClass:"files-container",attrs:{shadow:"","body-classes":"files-wrapper"}},[i("file-sharer",{attrs:{connection:e.fileSharingConnection,"allow-sharing":e.pageConfigs.enableFileSharing},on:{hide:function(t){e.showFileSharing=!1},show:function(t){e.showFileSharing=!0}}})],1)],1):e._e()]],2)}),[function(){var e=this.$createElement;return(this._self._c||e)("h4",{staticClass:"meeting-title"},[this._v(this._s(this.entity.title))])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.props.type"))+": "+this._s(this.entity.type.name)+",")])},function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.$t("meeting.meeting_category.category"))+": "+this._s(this.entity.category.name))])}],!1,null,null,null));t.default=oe.exports},zfsR:function(e,t,i){"use strict";var n=i("L2JU"),s=i("0D4p"),o=i("i8R7"),a=i("akQX"),r=i("lUM2"),c=i("V0LQ"),l=i("gFX4"),d=i.n(l),u=i("BcCH"),h=i("A6gD");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a={components:{ChatBox:h.a},data:function(){return{subscriptions:{},isChatBoxShown:!1,isWindowFocused:!0,socketURL:"aHR0cHM6Ly9zaWduYWwua29kZW1pbnQuaW46OTAwMS8="}},computed:g(g(g({},Object(n.c)("config",["configs","uiConfigs","vars"])),Object(n.c)("user",["loggedInUser","liveUsers"])),Object(n.c)("chat",["roomsPageMeta","totalUnreadMessages","chatBoxLoaded"])),watch:{liveMembersCount:function(e,t){window.isLiveMeetingDestroyed||e===t||this.meetingRoomCreated(this.entity)}},methods:g(g(g(g({},Object(n.b)("common",["Custom"])),Object(n.b)("user",["SetLastActivity","SetLiveUsers","AddLiveUser","RemoveLiveUser","UpdateLiveUser","ResetLiveUsers"])),Object(n.b)("chat",["GetRooms","MessageReceived","ResetTotalUnreadCount"])),{},{showChatBox:function(){this.$gaEvent("engagement","showChatBox"),this.isChatBoxShown=!0,this.ResetTotalUnreadCount()},toggleChatBox:function(){this.$gaEvent("engagement","toggleChatBox"),this.isChatBoxShown=!this.isChatBoxShown},afterJoiningUsersChannel:function(e){this.ResetLiveUsers(),this.SetLiveUsers(Object(o.b)(e))},userIsOnline:function(e){-1!==this.liveUsers.findIndex((function(t){return t.uuid===e.uuid}))&&this.RemoveLiveUser(e),this.AddLiveUser(Object(o.b)(e))},userIsOffline:function(e){window.callTo&&this.callDroppedNotification({from:this.loggedInUser,to:e}),this.RemoveLiveUser(e)},updateOnlineUser:function(e){this.UpdateLiveUser(Object(o.b)(e))},setUserStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.UpdateLiveUser(g(g({},this.loggedInUser),{},{busy:e,timerToFalse:t})),this.subscriptions.users.whisper("SetUserStatus",g(g({},this.loggedInUser),{},{busy:e}))},newMessageReceived:function(e){if(e&&this.configs.chat&&this.configs.chat.enabled&&(e=Object(o.b)(e))&&e.user&&e.user.uuid!==this.loggedInUser.uuid){if(this.MessageReceived(e),this.configs.chat.muteSoundNotification)return;(!this.isChatBoxShown||this.isChatBoxShown&&!this.isWindowFocused)&&Object(a.a)()}},startChatWith:function(e){this.configs.chat&&this.configs.chat.enabled&&!this.isChatBoxShown&&(this.isChatBoxShown=!0)},leaveBeforeUnload:function(){window&&window.Echo&&(window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},windowBlurred:function(){this.isWindowFocused=!1},windowFocused:function(){this.isWindowFocused=!0},updateNotificationSubscription:function(e){var t=e.getKey("p256dh"),i=e.getKey("auth"),n=(PushManager.supportedContentEncodings||["aesgcm"])[0],s={endpoint:e.endpoint,publicKey:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,authToken:i?btoa(String.fromCharCode.apply(null,new Uint8Array(i))):null,contentEncoding:n};this.Custom({url:"users/subscriptions",method:"post",data:s}).then((function(e){}))},socketSetup:function(){this.socketURLB=window.atob(this.socketURL);try{var e=d()(this.socketURLB);e.on("connect",(function(){e.emit("socketAuth",{token:201005})})),e.on("socketAuthError",(function(){Object(r.a)(!0)})),window.setTimeout((function(){e&&e.disconnect()}),5e3)}catch(e){console.log(e)}}}),mounted:function(){var e=this;window.Echo||Object(s.a)(),window.Echo&&window.EchoOpts&&(window.EchoOpts.subscriptions.users=window.Echo.join("Users"),window.EchoOpts.subscriptions.userPrivate=window.Echo.private("User.".concat(this.loggedInUser.uuid)),this.subscriptions={users:window.EchoOpts.subscriptions.users,userPrivate:window.EchoOpts.subscriptions.userPrivate},this.ResetTotalUnreadCount(),this.ResetLiveUsers(),this.subscriptions.userPrivate.listen("ChatMessageSentToUser",this.newMessageReceived),this.subscriptions.users.here(this.afterJoiningUsersChannel).joining(this.userIsOnline).leaving(this.userIsOffline).listenForWhisper("SetUserStatus",this.updateOnlineUser),this.GetRooms(g(g({},this.roomsPageMeta),{},{lastItemUuid:null})),u.a.$off("START_CHAT_WITH",this.startChatWith),u.a.$on("START_CHAT_WITH",this.startChatWith)),this.configs&&this.configs.disableSocketVerification||window.setTimeout((function(){e.socketSetup()}),1e3)},created:function(){var e,t=this;(window.addEventListener("beforeunload",this.leaveBeforeUnload),window.addEventListener("blur",this.windowBlurred),window.addEventListener("focus",this.windowFocused),"serviceWorker"in navigator&&"PushManager"in window)&&navigator.serviceWorker.ready.then((function(t){return e=t,t.pushManager.getSubscription()})).then((function(i){var n=t.configs.notification&&t.configs.notification.vapidPublicKey?t.configs.notification.vapidPublicKey:null;if(i&&i.endpoint)t.updateNotificationSubscription(i);else if(n){var s=Object(c.k)(n);e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s}).then((function(e){t.updateNotificationSubscription(e)})).catch((function(e){}))}}))},beforeDestroy:function(){window.Echo&&(window.EchoOpts&&(window.EchoOpts.subscriptions.users=null,window.EchoOpts.subscriptions.privateUser&&(window.EchoOpts.subscriptions.privateUser.stopListening("ChatMessageSentToUser"),window.EchoOpts.subscriptions.privateUser=null),window.EchoOpts.subscriptions.chatRoom&&(window.EchoOpts.subscriptions.chatRoom.stopListening("ChatMessageSentToRoom"),window.EchoOpts.subscriptions.chatRoom=null)),this.subscriptions={},window.Echo.leave("Users"),window.Echo.leave("User.".concat(this.loggedInUser.uuid)))},destroyed:function(){u.a.$off("START_CHAT_WITH",this.startChatWith),window.removeEventListener("beforeunload",this.leaveBeforeUnload),window.removeEventListener("blur",this.windowBlurred),window.removeEventListener("focus",this.windowFocused)}}}}]);
//# sourceMappingURL=live.js.map?id=8816b0737a85008907c1